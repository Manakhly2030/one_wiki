{
  "version": 3,
  "sources": ["../../../../../apps/one_wiki/one_wiki/public/js/edit_asset.js", "../../../../../apps/one_wiki/one_wiki/public/js/wiki.js", "../../../../../apps/one_wiki/one_wiki/public/js/edit_wiki.js", "../../../../../apps/one_wiki/one_wiki/public/js/render_wiki.js", "../../../../../apps/one_wiki/one_wiki/public/js/edit_wiki_ar.js", "../../../../../apps/one_wiki/one_wiki/public/js/edit_asset_ar.js"],
  "sourcesContent": ["window.EditAsset = class EditAsset {\n\tconstructor() {\n\t\tthis.make_code_field_group();\n\t\tthis.add_attachment_popover();\n\t\t// remove this once the pr related to code editor max lines is merged\n\t\tthis.set_code_editor_height();\n\t\tthis.render_preview();\n\t\tthis.add_attachment_handler();\n\t\tthis.set_listeners();\n\t\tthis.create_comment_box();\n\t\tthis.make_title_editable();\n\t\tthis.render_sidebar_diff()\n\t}\n\n\tmake_code_field_group() {\n\t\tthis.code_field_group = new frappe.ui.FieldGroup({\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"type\",\n\t\t\t\t\tfieldtype: \"Data\",\n\t\t\t\t\tdefault: \"Rich Text\",\n\t\t\t\t\toptions: \"Rich Text\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"code_html\",\n\t\t\t\t\tfieldtype: \"Text Editor\",\n\t\t\t\t\tdefault: $(\".wiki-content-html\").html(),\n\t\t\t\t\tdepends_on: 'eval:doc.type==\"Rich Text\"',\n\t\t\t\t},\n\t\t\t],\n\t\t\tbody: $(\".wiki-write\").get(0),\n\t\t});\n\t\tthis.code_field_group.make();\n\t\t$(\".wiki-write .form-section:last\").removeClass(\"empty-section\");\n\t}\n\n\tget_attachment_controls_html() {\n\t\treturn `\n\t\t\t<div class=\"attachment-controls\">\n\t\t\t\t<div class=\"show-attachments\" tabindex=\"-1\" data-trigger=\"focus\">\n\t\t\t\t\t${this.get_show_uploads_svg()}\n\t\t\t\t\t<span class=\"number\">0</span> attachments\n\t\t\t\t</div>\n\t\t\t\t<div class=\"add-attachment-wiki\">\n\t\t\t\t\t<span class=\"btn\">\n\t\t\t\t\t\t${this.get_upload_image_svg()}\n\t\t\t\t\t\tUpload Attachment\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tget_show_uploads_svg() {\n\t\treturn `<svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<path d=\"M12.6004 6.68841L7.6414 11.5616C6.23259 12.946 3.8658 12.946 2.45699 11.5616C1.04819 10.1772\n\t\t\t1.04819 7.85132 2.45699 6.4669L6.85247 2.14749C7.86681 1.15071 9.44467 1.15071 10.459 2.14749C11.4733\n\t\t\t3.14428 11.4733 4.69483 10.459 5.69162L6.40165 9.62339C5.83813 10.1772 4.93649 10.1772 4.42932 9.62339C3.8658\n\t\t\t9.06962 3.8658 8.18359 4.42932 7.68519L7.81045 4.36257\" stroke=\"#2D95F0\" stroke-miterlimit=\"10\" stroke-linecap=\"round\"/>\n\t\t</svg>`\n\t}\n\n\tget_upload_image_svg() {\n\t\treturn `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<path d=\"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899\n\t\t\t 4.41015 14.5 8 14.5Z\" stroke=\"#505A62\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n\t\t\t<path d=\"M8 4.75V11.1351\" stroke=\"#505A62\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n\t\t\t<path d=\"M5.29102 7.45833L7.99935 4.75L10.7077 7.45833\" stroke=\"#505A62\" stroke-miterlimit=\"10\" stroke-linecap=\"round\"\n\t\t\tstroke-linejoin=\"round\"/>\n\t\t</svg>`\n\n\t}\n\n\tadd_attachment_popover() {\n\t\t$(\".show-attachments\").popover({\n\t\t\tplacement: \"bottom\",\n\t\t\tcontent: () => {\n\t\t\t\treturn this.build_attachment_table();\n\t\t\t},\n\t\t\thtml: true,\n\t\t});\n\t}\n\n\tbuild_attachment_table() {\n\t\tvar wrapper = $('<div class=\"wiki-attachment\"></div>');\n\t\twrapper.empty();\n\n\t\tvar table = $(this.get_attachment_table_header_html()).appendTo(wrapper);\n\t\tif (!this.attachments || !this.attachments.length)\n\t\t\treturn \"No attachments uploaded\";\n\n        const caption = file_url => file_url\n            .split(\"/\").pop()                     // filename\n            .split(\".\").slice(0, -1).join(\".\")    // filename without extension\n            .replaceAll(\"_\", \" \")\n            .replaceAll(\"-\", \" \");\n\n\t\tthis.attachments.forEach((f) => {\n\t\t\tconst row = $(\"<tr></tr>\").appendTo(table.find(\"tbody\"));\n\t\t\t$(`<td>${f.file_name}</td>`).appendTo(row);\n\t\t\t$(`<td>\n\t\t\t<a class=\"btn btn-default btn-xs btn-primary-light text-nowrap copy-link\" data-link=\"![${caption(f.file_url)}](${f.file_url})\" data-name = \"${f.file_name}\" >\n\t\t\t\tCopy Link\n\t\t\t</a>\n\t\t\t</td>`).appendTo(row);\n\t\t\t$(`<td>\n\n\t\t\t<a class=\"btn btn-default btn-xs  center delete-button\"  data-name = \"${f.file_name}\" >\n\t\t\t<svg class=\"icon icon-sm\"><use xlink:href=\"#icon-delete\"></use></svg>\n\n\t\t\t</a>\n\t\t\t</td>`).appendTo(row);\n\t\t});\n\t\treturn wrapper;\n\t}\n\n\tget_attachment_table_header_html() {\n\t\treturn `<table class=\"table  attachment-table\" \">\n\t\t\t<tbody></tbody>\n\t\t</table>`;\n\t}\n\n\tset_code_editor_height() {\n\t\tsetTimeout(() => {\n\t\t\t// expand_code_editor\n\t\t\tconst code_md = this.code_field_group.get_field(\"code_md\");\n\t\t\tcode_md.expanded = !this.expanded;\n\t\t\tcode_md.refresh_height();\n\t\t\tcode_md.toggle_label();\n\t\t}, 120);\n\t}\n\n\traise_patch(draft = false) {\n\t\tvar side = {};\n\n\t\tlet name = $(\".doc-sidebar .web-sidebar\").get(0).dataset.name;\n\t\tside[name] = [];\n\t\tlet items = $($(\".doc-sidebar .web-sidebar\").get(0))\n\t\t\t.children(\".sidebar-items\")\n\t\t\t.children(\"ul\")\n\t\t\t.not(\".hidden\")\n\t\t\t.children(\"li\");\n\t\titems.each((item) => {\n\t\t\tif (!items[item].dataset.name) return;\n\t\t\tside[name].push({\n\t\t\t\tname: items[item].dataset.name,\n\t\t\t\ttype: items[item].dataset.type,\n\t\t\t\tnew: items[item].dataset.new,\n\t\t\t\ttitle: items[item].dataset.title,\n\t\t\t\tgroup_name: items[item].dataset.groupName,\n\t\t\t});\n\t\t});\n\n\t\t$('.doc-sidebar [data-type=\"Wiki Sidebar\"]').each(function () {\n\t\t\tlet name = $(this).get(0).dataset.groupName;\n\t\t\tside[name] = [];\n\t\t\tlet items = $(this).children(\"ul\").children(\"li\");\n\t\t\titems.each((item) => {\n\t\t\t\tif (!items[item].dataset.name) return;\n\t\t\t\tside[name].push({\n\t\t\t\t\tname: items[item].dataset.name,\n\t\t\t\t\ttype: items[item].dataset.type,\n\t\t\t\t\tnew: items[item].dataset.new,\n\t\t\t\t\ttitle: items[item].dataset.title,\n\t\t\t\t\tgroup_name: items[item].dataset.groupName,\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tvar me = this;\n\t\tvar dfs = [];\n\t\tconst title_of_page = $('.edit-title span').text();\n\t\tdfs.push(\n\t\t\t{\n\t\t\t\tfieldname: \"edit_message\",\n\t\t\t\tfieldtype: \"Text\",\n\t\t\t\tlabel: \"Message\",\n\t\t\t\tdefault: $('[name=\"new\"]').val()\n\t\t\t\t\t? `Add new page: ${title_of_page}`\n\t\t\t\t\t: `Edited ${title_of_page}`,\n\t\t\t\tmandatory: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"sidebar_edited\",\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t\tlabel: \"I updated the sidebar\",\n\t\t\t\tdefault: $('[name=\"new\"]').val() ? 1 : 0,\n\t\t\t}\n\t\t);\n\n\t\tlet dialog = new frappe.ui.Dialog({\n\t\t\tfields: dfs,\n\t\t\ttitle: __(\"Please describe your changes\"),\n\t\t\tprimary_action_label: __(\"Submit Changes\"),\n\t\t\tprimary_action: function () {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"wiki.wiki.doctype.wiki_page.wiki_page.update\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tname: $('[name=\"wiki_page\"]').val(),\n\t\t\t\t\t\twiki_page_patch: $('[name=\"wiki_page_patch\"]').val(),\n\t\t\t\t\t\tmessage: this.get_value(\"edit_message\"),\n\t\t\t\t\t\tsidebar_edited: this.get_value(\"sidebar_edited\"),\n\t\t\t\t\t\tcontent: me.content,\n\t\t\t\t\t\ttype: me.code_field_group.get_value(\"type\"),\n\t\t\t\t\t\tattachments: me.attachments,\n\t\t\t\t\t\tnew: $('[name=\"new\"]').val(),\n\t\t\t\t\t\ttitle: $('.edit-title span').text(),\n\t\t\t\t\t\tnew_sidebar: $(\".doc-sidebar\").get(0).innerHTML,\n\t\t\t\t\t\tnew_sidebar_items: side,\n\t\t\t\t\t\tdraft:draft ? draft : null\n\t\t\t\t\t},\n\t\t\t\t\tcallback: (r) => {\n\t\t\t\t\t\tif (!r.message.approved && r.message.route == 'contributions') {\n\t\t\t\t\t\t\tfrappe.msgprint({\n\t\t\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t\t\t\"A Change Request has been created. You can track your requests on the contributions page\",\n\t\t\t\t\t\t\t\tindicator: \"green\",\n\t\t\t\t\t\t\t\ttitle: \"Change Request Created\",\n\t\t\t\t\t\t\t\talert: 1\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (!r.message.approved && r.message.route == 'drafts') {\n\t\t\t\t\t\t\tfrappe.msgprint({\n\t\t\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t\t\t\"Draft Saved\",\n\t\t\t\t\t\t\t\tindicator: \"green\",\n\t\t\t\t\t\t\t\ttitle: \"Change Request Created\",\n\t\t\t\t\t\t\t\talert: 1\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// route back to the main page\n\t\t\t\t\t\twindow.location.href = '/' + r.message.route;\n\t\t\t\t\t},\n\t\t\t\t\tfreeze: true,\n\t\t\t\t});\n\t\t\t\tdialog.hide();\n\t\t\t\t$(\"#freeze\").addClass(\"show\");\n\t\t\t},\n\t\t});\n\t\tdialog.show();\n\t}\n\n\trender_preview() {\n\t\t$('a[data-toggle=\"tab\"]').on(\"click\", (e) => {\n\t\t\tlet activeTab = $(e.target);\n\n\t\t\tif (\n\t\t\t\tactiveTab.prop(\"id\") === \"preview-tab\" ||\n\t\t\t\tactiveTab.prop(\"id\") === \"diff-tab\"\n\t\t\t) {\n\t\t\t\tlet $preview = $(\".wiki-preview\");\n\t\t\t\tlet $diff = $(\".wiki-diff\");\n\t\t\t\tconst type = this.code_field_group.get_value(\"type\");\n\t\t\t\tlet content = \"\";\n\t\t\t\tif (type == \"Markdown\") {\n\t\t\t\t\tcontent = this.code_field_group.get_value(\"code_md\");\n\t\t\t\t} else {\n\t\t\t\t\tcontent = this.code_field_group.get_value(\"code_html\");\n\t\t\t\t\tvar turndownService = new TurndownService();\n\t\t\t\t\tturndownService = turndownService.keep([\"div class\", \"iframe\"]);\n\t\t\t\t\tcontent = turndownService.turndown(content);\n\t\t\t\t}\n\t\t\t\tif (!content) {\n\t\t\t\t\tthis.set_empty_message($preview, $diff);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.set_loading_message($preview, $diff);\n\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"wiki.wiki.doctype.wiki_page.wiki_page.preview\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tcontent: content,\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\tpath: this.route,\n\t\t\t\t\t\tname: $('[name=\"wiki_page\"]').val(),\n\t\t\t\t\t\tattachments: this.attachments,\n\t\t\t\t\t\tnew: $('[name=\"new\"]').val(),\n\t\t\t\t\t},\n\t\t\t\t\tcallback: (r) => {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\t$preview.html(r.message.html);\n\t\t\t\t\t\t\tif (!$('[name=\"new\"]').val()) {\n\t\t\t\t\t\t\t\tconst empty_diff = `<div class=\"text-muted center\"> No Changes made</div>`\n\t\t\t\t\t\t\t\tconst diff_html = $(r.message.diff).find('.insert, .delete').length?r.message.diff:empty_diff\n\t\t\t\t\t\t\t\t$diff.html(diff_html);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tset_empty_message($preview, $diff) {\n\t\t$preview.html(\"<div>Please add some code</div>\");\n\t\t$diff.html(\"<div>Please add some code</div>\");\n\t}\n\n\tset_loading_message($preview, $diff) {\n\t\t$preview.html(\"Loading preview...\");\n\t\t$diff.html(\"Loading diff...\");\n\t}\n\n\tadd_attachment_handler() {\n\t\tvar me = this;\n\t\t$(\".add-attachment-wiki\").click(function () {\n\t\t\tme.new_attachment();\n\t\t});\n\t\t$(\".submit-wiki-page\").click(function () {\n\t\t\tme.get_markdown();\n\t\t});\n\n\t\t$(\".draft-wiki-page\").click(function () {\n\t\t\t// setting draft as true\n\t\t\tme.get_markdown(true);\n\t\t});\n\t}\n\n\tnew_attachment() {\n\t\tif (this.dialog) {\n\t\t\t// remove upload dialog\n\t\t\tthis.dialog.$wrapper.remove();\n\t\t}\n\n\t\tnew frappe.ui.FileUploader({\n\t\t\tfolder: \"Home/Attachments\",\n\t\t\ton_success: (file_doc) => {\n\t\t\t\tif (!this.attachments) this.attachments = [];\n\t\t\t\tif (!this.save_paths) this.save_paths = {};\n\t\t\t\tthis.attachments.push(file_doc);\n\t\t\t\t$(\".wiki-attachment\").empty().append(this.build_attachment_table());\n\t\t\t\t$(\".attachment-controls\").find(\".number\").text(this.attachments.length);\n\t\t\t},\n\t\t});\n\t}\n\n\tget_markdown(draft = false) {\n\t\tvar me = this;\n\n\t\tif (me.code_field_group.get_value(\"type\") == \"Markdown\") {\n\t\t\tthis.content = me.code_field_group.get_value(\"code_md\");\n\t\t\tthis.raise_patch(draft);\n\t\t} else {\n\t\t\tthis.content = this.code_field_group.get_value(\"code_html\");\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod:\n\t\t\t\t\t\"wiki.wiki.doctype.wiki_page.wiki_page.extract_images_from_html\",\n\t\t\t\targs: {\n\t\t\t\t\tcontent: this.content,\n\t\t\t\t},\n\t\t\t\tcallback: (r) => {\n\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\tme.content = r.message;\n\t\t\t\t\t\tvar turndownService = new TurndownService();\n\t\t\t\t\t\tturndownService = turndownService.keep([\"div class\", \"iframe\"]);\n\t\t\t\t\t\tme.content = turndownService.turndown(me.content);\n\t\t\t\t\t\tme.raise_patch(draft);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tset_listeners() {\n\t\tvar me = this;\n\n\t\t$(`body`).on(\"click\", `.copy-link`, function () {\n\t\t\tfrappe.utils.copy_to_clipboard($(this).attr(\"data-link\"));\n\t\t});\n\n\t\t$(`body`).on(\"click\", `.delete-button`, function () {\n\t\t\tfrappe.confirm(\n\t\t\t\t`Are you sure you want to delete the file \"${$(this).attr(\n\t\t\t\t\t\"data-name\"\n\t\t\t\t)}\"`,\n\t\t\t\t() => {\n\t\t\t\t\tme.attachments.forEach((f, index, object) => {\n\t\t\t\t\t\tif (f.file_name == $(this).attr(\"data-name\")) {\n\t\t\t\t\t\t\tobject.splice(index, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t$(\".wiki-attachment\").empty().append(me.build_attachment_table());\n\t\t\t\t\t$(\".attachment-controls\").find(\".number\").text(me.attachments.length);\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tcreate_comment_box() {\n\t\tthis.comment_box = frappe.ui.form.make_control({\n\t\t\tparent: $(\".comment-box\"),\n\t\t\tdf: {\n\t\t\t\tfieldname: \"new_comment\",\n\t\t\t\tfieldtype: \"Comment\",\n\t\t\t},\n\t\t\tenable_mentions: false,\n\t\t\trender_input: true,\n\t\t\tonly_input: true,\n\t\t\ton_submit: (comment) => {\n\t\t\t\tthis.add_comment_to_patch(comment);\n\t\t\t},\n\t\t});\n\t}\n\n\tadd_comment_to_patch(comment) {\n\t\tif (strip_html(comment).trim() != \"\") {\n\t\t\tthis.comment_box.disable();\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod:\n\t\t\t\t\t\"wiki.wiki.doctype.wiki_page_patch.wiki_page_patch.add_comment_to_patch\",\n\t\t\t\targs: {\n\t\t\t\t\treference_name: $('[name=\"wiki_page_patch\"]').val(),\n\t\t\t\t\tcontent: comment,\n\t\t\t\t\tcomment_email: frappe.session.user,\n\t\t\t\t\tcomment_by: frappe.session.user_fullname,\n\t\t\t\t},\n\t\t\t\tcallback: (r) => {\n\t\t\t\t\tcomment = r.message;\n\n\t\t\t\t\tthis.display_new_comment(comment, this.comment_box);\n\t\t\t\t},\n\t\t\t\talways: () => {\n\t\t\t\t\tthis.comment_box.enable();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tdisplay_new_comment(comment, comment_box) {\n\t\tif (comment) {\n\t\t\tcomment_box.set_value(\"\");\n\n\t\t\tconst new_comment = this.get_comment_html(\n\t\t\t\tcomment.owner,\n\t\t\t\tcomment.creation,\n\t\t\t\tcomment.timepassed,\n\t\t\t\tcomment.content\n\t\t\t);\n\n\t\t\t$(\".timeline-items\").prepend(new_comment);\n\t\t}\n\t}\n\n\tget_comment_html(owner, creation, timepassed, content) {\n\t\treturn $(`\n\t\t\t<div class=\"timeline-item\">\n\t\t\t\t<div class=\"timeline-badge\">\n\t\t\t\t\t<svg class=\"icon icon-md\">\n\t\t\t\t\t\t<use href=\"#icon-small-message\"></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"timeline-content frappe-card\">\n\t\t\t\t\t<div class=\"timeline-message-box\">\n\t\t\t\t\t\t<span class=\"flex justify-between\">\n\t\t\t\t\t\t\t<span class=\"text-color flex\">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t${owner}\n\t\t\t\t\t\t\t\t\t<span class=\"text-muted margin-left\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"frappe-timestamp \"\n\t\t\t\t\t\t\t\t\t\t\tdata-timestamp=\"${creation}\"\n\t\t\t\t\t\t\t\t\t\t\ttitle=\"${creation}\">${timepassed}</span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div class=\"content\">\n\t\t\t\t\t\t\t${content}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`);\n\t}\n\n\tmake_title_editable() {\n\t\tconst title_span = $(\".edit-title>span\");\n\t\tconst title_handle = $(\".edit-title>i\");\n\t\tconst title_input = $(\".edit-title>input\");\n\t\ttitle_handle.click(() => {\n\t\t\ttitle_span.addClass(\"hide\");\n\t\t\ttitle_handle.addClass(\"hide\");\n\t\t\ttitle_input.removeClass(\"hide\");\n\t\t\ttitle_input.val(title_span.text());\n\t\t\ttitle_input.focus();\n\t\t});\n\t\ttitle_input.focusout(() => {\n\t\t\ttitle_span.removeClass(\"hide\");\n\t\t\ttitle_handle.removeClass(\"hide\");\n\t\t\ttitle_input.addClass(\"hide\");\n\t\t\ttitle_span.text(title_input.val());\n\t\t});\n\t\ttitle_input.on('change', (e) => {\n\t\t\t$(\".doc-sidebar .sidebar-items a.active\").text(title_input.val())\n\t\t});\n\t}\n\n\tapprove_wiki_page() {\n\t\tfrappe.call({\n\t\t\tmethod: \"wiki.wiki.doctype.wiki_page.wiki_page.approve\",\n\t\t\targs: {\n\t\t\t\twiki_page_patch: $('[name=\"wiki_page_patch\"]').val(),\n\t\t\t},\n\t\t\tcallback: () => {\n\t\t\t\tfrappe.msgprint({\n\t\t\t\t\tmessage:\n\t\t\t\t\t\t\"The Change has been approved.\",\n\t\t\t\t\tindicator: \"green\",\n\t\t\t\t\ttitle: \"Approved\",\n\t\t\t\t});\n\t\t\t\twindow.location.href = '/' + $('[name=\"wiki_page\"]').val();\n\t\t\t},\n\t\t\tfreeze: true,\n\t\t});\n\n\t}\n\n\trender_sidebar_diff() {\n\t\tconst lis = $(\".sidebar-diff\");\n\t\tlet $new_sidebar_items = $('[name=\"new_sidebar_items\"]').val();\n\t\tconst sidebar_items = $new_sidebar_items && JSON.parse($new_sidebar_items);\n\t\tlis.empty();\n\t\tfor (let sidebar in sidebar_items) {\n\t\t\tfor (let item in sidebar_items[sidebar]) {\n\t\t\t\tlet class_name = (\".\" + sidebar).replaceAll(\"/\", \"\\\\/\");\n\t\t\t\tlet target = lis.find(class_name);\n\t\t\t\tif (!target.length) {\n\t\t\t\t\ttarget = $(\".sidebar-diff\");\n\t\t\t\t}\n\t\t\t\tif (sidebar_items[sidebar][item].type == \"Wiki Sidebar\") {\n\t\t\t\t\t$(target).append(\n\t\t\t\t\t\t\"<li>\" +\n\t\t\t\t\t\t\tsidebar_items[sidebar][item].title +\n\t\t\t\t\t\t\t\"</li>\" +\n\t\t\t\t\t\t\t\"<ul class=\" +\n\t\t\t\t\t\t\tsidebar_items[sidebar][item].group_name +\n\t\t\t\t\t\t\t\"></ul>\"\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t$(target).append(\n\t\t\t\t\t\t\"<li class=\" +\n\t\t\t\t\t\t\tsidebar_items[sidebar][item].group_name +\n\t\t\t\t\t\t\t\">\" +\n\t\t\t\t\t\t\tsidebar_items[sidebar][item].title +\n\t\t\t\t\t\t\t\"</li>\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n", "window.Wiki = class Wiki {\n\tactivate_sidebars() {\n\t\t$(\".sidebar-item\").each(function (index) {\n\t\t\tconst active_class = \"active\";\n\t\t\tlet page_href = window.location.pathname;\n\t\t\tif (page_href.indexOf(\"#\") !== -1) {\n\t\t\t\tpage_href = page_href.slice(0, page_href.indexOf(\"#\"));\n\t\t\t}\n\t\t\tif ($(this).data(\"route\") == page_href) {\n\t\t\t\t$(this).addClass(active_class);\n\t\t\t\t$(this).find(\"a\").addClass(active_class);\n\t\t\t}\n\t\t});\n\t\t// scroll the active sidebar item into view\n\t\tlet active_sidebar_item = $(\".sidebar-item.active\");\n\t\tif (active_sidebar_item.length > 0) {\n\t\t\tactive_sidebar_item.get(1).scrollIntoView(true, {\n\t\t\t\tbehavior: \"smooth\",\n\t\t\t\tblock: \"nearest\",\n\t\t\t});\n\t\t}\n\t}\n\n\ttoggle_sidebar(event) {\n\t\t$(event.currentTarget).parent().children(\"ul\").toggleClass(\"hidden\");\n\t\t$(event.currentTarget).find(\".drop-icon\").toggleClass(\"hidden\");\n\t\t$(event.currentTarget).find(\".drop-left\").toggleClass(\"hidden\");\n\t\tevent.stopPropagation();\n\t}\n\n\tset_active_sidebar() {\n\t\t$(\".doc-sidebar,.web-sidebar\").on(\n\t\t\t\"click\",\n\t\t\t\".collapsible\",\n\t\t\tthis.toggle_sidebar\n\t\t);\n\t\t$(\".sidebar-group\").children(\"ul\").addClass(\"hidden\");\n\t\t$(\".sidebar-item.active\")\n\t\t\t.parents(\" .web-sidebar .sidebar-group>ul\")\n\t\t\t.removeClass(\"hidden\");\n\t\tconst sidebar_groups = $(\".sidebar-item.active\").parents(\n\t\t\t\".web-sidebar .sidebar-group\"\n\t\t);\n\t\tsidebar_groups.each(function () {\n\t\t\t$(this).children(\".collapsible\").find(\".drop-left\").addClass(\"hidden\");\n\t\t});\n\t\tsidebar_groups.each(function () {\n\t\t\t$(this).children(\".collapsible\").find(\".drop-icon\").removeClass(\"hidden\");\n\t\t});\n\t}\n\n\tscrolltotop() {\n\t\t$('html,body').animate({scrollTop:0},0);\n\t}\n};\n", "window.EditWiki = class EditWiki extends Wiki {\n\tconstructor() {\n\t\tsuper();\n\t\tfrappe.provide(\"frappe.ui.keys\");\n\t\t$(\"document\").ready(() => {\n\t\t\tfrappe\n\t\t\t\t.call(\"wiki.wiki.doctype.wiki_page.wiki_page.get_sidebar_for_page\", {\n\t\t\t\t\twiki_page: $('[name=\"wiki_page\"]').val(),\n\t\t\t\t})\n\t\t\t\t.then((result) => {\n\t\t\t\t\t$(\".doc-sidebar\").empty().append(result.message);\n\t\t\t\t\tthis.activate_sidebars();\n\t\t\t\t\tthis.set_active_sidebar();\n\t\t\t\t\tthis.set_empty_ul();\n\t\t\t\t\tthis.set_sortable();\n\t\t\t\t\tthis.set_add_item();\n\t\t\t\t\tthis.scrolltotop()\n\t\t\t\t});\n\t\t});\n\t}\n\n\tactivate_sidebars() {\n\t\t$(\".sidebar-item\").each(function (index) {\n\t\t\tconst active_class = \"active\";\n\t\t\tlet page_href = window.location.pathname;\n\t\t\tif (page_href.indexOf(\"#\") !== -1) {\n\t\t\t\tpage_href = page_href.slice(0, page_href.indexOf(\"#\"));\n\t\t\t}\n\t\t\tif (page_href.split('/').slice(0,-1).join('/')== $(this).data(\"route\")) {\n\n\t\t\t\tif ($('[name=\"new\"]').first().val()) {\n\t\t\t\t\t$(`\n\t\t\t\t\t<li class=\"sidebar-item active\" data-type=\"Wiki Page\" data-name=\"new-wiki-page\" data-new=1>\n\t\t\t\t\t\t<div><div>\n\t\t\t\t\t\t\t<a href=\"#\"  class ='active'>New Wiki Page</a>\n\t\t\t\t\t\t</div></div>\n\t\t\t\t\t</li>\n\t\t\t\t`).insertAfter($(this));\n\t\t\t\t} else {\n\t\t\t\t\t$(this).addClass(active_class);\n\t\t\t\t\t$(this).find(\"a\").addClass(active_class);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t// scroll the active sidebar item into view\n\t\tlet active_sidebar_item = $(\".sidebar-item.active\");\n\t\tif (active_sidebar_item.length > 0) {\n\t\t\tactive_sidebar_item.get(0).scrollIntoView(true, {\n\t\t\t\tbehavior: \"smooth\",\n\t\t\t\tblock: \"nearest\",\n\t\t\t});\n\t\t}\n\t}\n\n\tset_empty_ul() {\n\t\t$(\".collapsible\").each(function () {\n\t\t\tif ($(this).parent().find(\"ul\").length == 0) {\n\t\t\t\t$(this)\n\t\t\t\t\t.parent()\n\t\t\t\t\t.append(\n\t\t\t\t\t\t$(`<ul class=\"list-unstyled hidden\" style=\"min-height:20px;\"> </ul`)\n\t\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\tset_sortable() {\n\t\t$(\".web-sidebar ul\").each(function () {\n\t\t\tnew Sortable(this, {\n\t\t\t\tgroup: {\n\t\t\t\t\tname: \"qux\",\n\t\t\t\t\tput: [\"qux\"],\n\t\t\t\t\tpull: [\"qux\"],\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\t\n\tset_add_item() {\n\t\t$(`<div class=\"text-muted add-sidebar-item small\">+ Add Item</div>\n\t\t\t<div class=\"text-muted small mt-3\"><i>Drag items to re-order</i></div>`).appendTo(\n\t\t\t$(\".web-sidebar\")\n\t\t);\n\t\tvar me = this;\n\t\t$(\".add-sidebar-item\").click(function () {\n\t\t\tvar dfs = me.get_add_new_item_dialog_fields();\n\n\t\t\tvar dialog = new frappe.ui.Dialog({\n\t\t\t\ttitle: \"Add to sidebar\",\n\t\t\t\tfields: dfs,\n\t\t\t\tprimary_action: function (fields) {\n\t\t\t\t\tif (fields.type == \"Add Wiki Page\") {\n\t\t\t\t\t\tme.add_wiki_page(fields);\n\t\t\t\t\t} else if(fields.type == \"Group\") {\n\t\t\t\t\t\tme.add_wiki_sidebar(fields);\n\t\t\t\t\t} else if(fields.type == \"Page\"){\n\t\t\t\t\t\tme.add_wiki_sidebar_page(fields);\n\t\t\t\t\t}\n\t\t\t\t\tdialog.hide();\n\t\t\t\t},\n\t\t\t});\n\t\t\tdialog.show();\n\t\t});\n\t}\n\n\tget_add_new_item_dialog_fields() {\n\t\treturn [\n\t\t\t{\n\t\t\t\tfieldname: \"type\",\n\t\t\t\tlabel: \"Do you want to add a page or group?\",\n\t\t\t\tfieldtype: \"Select\",\n\t\t\t\toptions: [\"Page\", \"Group\"],\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"wiki_page\",\n\t\t\t\tlabel: \"Wiki Page\",\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\toptions: \"Wiki Page\",\n\t\t\t\tdepends_on: \"eval: doc.type=='Page'\",\n\t\t\t\tmandatory_depends_on: \"eval: doc.type=='Page'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"route\",\n\t\t\t\tlabel: \"Route\",\n\t\t\t\tfieldtype: \"Data\",\n\t\t\t\tdepends_on: \"eval: doc.type=='Group'\",\n\t\t\t\tmandatory_depends_on: \"eval: doc.type=='Group'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"title\",\n\t\t\t\tlabel: \"Title\",\n\t\t\t\tfieldtype: \"Data\",\n\t\t\t\tdepends_on: \"eval: doc.type=='Group'\",\n\t\t\t\tmandatory_depends_on: \"eval: doc.type=='Group'\",\n\t\t\t},\n\t\t];\n\t}\n\n\tadd_wiki_page(fields) {\n\t\tvar me = this;\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.client.get_value\",\n\t\t\targs: {\n\t\t\t\tdoctype: \"Wiki Page\",\n\t\t\t\tfieldname: \"title\",\n\t\t\t\tfilters: fields.wiki_page,\n\t\t\t},\n\t\t\tcallback: function (r) {\n\t\t\t\tlet $new_page = me.get_new_page_html(r, fields);\n\n\t\t\t\t$new_page.appendTo(\n\t\t\t\t\t$(\".doc-sidebar .sidebar-items\")\n\t\t\t\t\t\t.children(\".list-unstyled\")\n\t\t\t\t\t\t.not(\".hidden\")\n\t\t\t\t\t\t.first()\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\tget_new_page_html(r, fields) {\n\t\treturn $(`\n\t\t<li class=\"sidebar-item\" data-type=\"Wiki Page\"\n\t\t\tdata-name=\"${fields.wiki_page}\" data-new=1 >\n\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t\t<a href=\"#\" class=\"green\" >\n\t\t\t\t\t\t\t${r.message.title}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</li>\n\t\t`);\n\t}\n\n\tadd_wiki_sidebar(fields) {\n\t\tlet $new_page = this.get_wiki_sidebar_html(fields);\n\n\t\t$new_page.appendTo(\n\t\t\t$(\".doc-sidebar .sidebar-items\")\n\t\t\t\t.children(\".list-unstyled\")\n\t\t\t\t.not(\".hidden\")\n\t\t\t\t.first()\n\t\t);\n\n\t\t$(\".web-sidebar ul\").each(function () {\n\t\t\tnew Sortable(this, {\n\t\t\t\tgroup: {\n\t\t\t\t\tname: \"qux\",\n\t\t\t\t\tput: [\"qux\"],\n\t\t\t\t\tpull: [\"qux\"],\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tadd_wiki_sidebar_page(fields) {\n\t\tvar me = this;\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.client.get\",\n\t\t\targs: {\n\t\t\t\tdoctype: \"Wiki Page\",\n\t\t\t\tname: fields.wiki_page,\n\t\t\t},\n\t\t\tcallback: function (r) {\n\t\t\t\tlet $new_page = me.get_wiki_sidebar_html(r.message);\n\n\t\t\t\t$new_page.appendTo(\n\t\t\t\t\t$(\".doc-sidebar .sidebar-items\")\n\t\t\t\t\t\t.children(\".list-unstyled\")\n\t\t\t\t\t\t.not(\".hidden\")\n\t\t\t\t\t\t.first()\n\t\t\t\t);\n\n\t\t\t\t$(\".web-sidebar ul\").each(function () {\n\t\t\t\t\tnew Sortable(this, {\n\t\t\t\t\t\tgroup: {\n\t\t\t\t\t\t\tname: \"qux\",\n\t\t\t\t\t\t\tput: [\"qux\"],\n\t\t\t\t\t\t\tpull: [\"qux\"],\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\tget_wiki_sidebar_html(fields) {\n\t\treturn $(`\n\t\t\t<li class=\"sidebar-group\" data-type=\"Wiki Sidebar\"\n\t\t\t\tdata-name=\"new-sidebar\" data-group-name=\"${fields.route}\"\n\t\t\t\tdata-new=1 data-title=\"${fields.title}\" draggable=\"false\">\n\n\t\t\t\t<div class=\"collapsible\">\n\t\t\t\t\t<span class=\"drop-icon hidden\">\n\t\t\t\t\t\t\t<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path d=\"M8 10L12 14L16 10\" stroke=\"#4C5A67\"\n\t\t\t\t\t\t\t\tstroke-miterlimit=\"10\" stroke-linecap=\"round\"\n\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"></path>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<span class=\"drop-left\">\n\t\t\t\t\t\t\t<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\tfill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path d=\"M10 16L14 12L10 8\" stroke=\"#4C5A67\"\n\t\t\t\t\t\t\t\tstroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"h6\">${fields.title}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<ul class=\"list-unstyled hidden\" style=\"min-height:20px;\"> </ul>\n\t\t\t</li>\n\t\t\t`);\n\t}\n};\n", "window.RenderWiki = class RenderWiki extends Wiki {\n\tconstructor(opts) {\n\t\tsuper();\n\t\t$(\"document\").ready(() => {\n\t\t\tif (\n\t\t\t\twindow.location.pathname != \"/revisions\" &&\n\t\t\t\twindow.location.pathname != \"/compare\"\n\t\t\t) {\n\t\t\t\tthis.activate_sidebars();\n\t\t\t\tthis.set_active_sidebar();\n\t\t\t\tthis.set_nav_buttons();\n\t\t\t\tthis.set_toc_highlighter();\n\t\t\t\tthis.scrolltotop()\n\t\t\t}\n\t\t});\n\t}\n\n\tset_toc_highlighter() {\n\t\t$(document).ready(function () {\n\t\t\t$(window).scroll(function () {\n\t\t\t\tif (currentAnchor().not('.no-underline').hasClass(\"active\")) return\n\t\t\t\t$(\".page-toc a\").removeClass(\"active\");\n\t\t\t\tcurrentAnchor().addClass(\"active\");\n\t\t\t});\n\t\t});\n\n\t\tfunction tocItem(anchor) {\n\t\t\treturn $('[href=\"' + anchor + '\"]');\n\t\t}\n\n\t\tfunction heading(anchor) {\n\t\t\treturn $(\"[id=\" + anchor.substr(1) + \"]\");\n\t\t}\n\n\t\tvar _anchors = null;\n\t\tfunction anchors() {\n\t\t\tif (!_anchors) {\n\t\t\t\t_anchors = $(\".page-toc a\").map(function () {\n\t\t\t\t\treturn $(this).attr(\"href\");\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn _anchors;\n\t\t}\n\n\t\tfunction currentAnchor() {\n\t\t\tvar winY = window.pageYOffset;\n\t\t\tvar currAnchor = null;\n\t\t\tanchors().each(function () {\n\t\t\t\tvar y = heading(this).position().top;\n\t\t\t\tif (y < winY + window.innerHeight * 0.23) {\n\t\t\t\t\tcurrAnchor = this;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn tocItem(currAnchor);\n\t\t}\n\t}\n\n\tset_nav_buttons() {\n\t\tvar current_index = -1;\n\n\t\t$(\".sidebar-column\")\n\t\t\t.find(\"a\")\n\t\t\t.each(function (index) {\n\t\t\t\tif ($(this).attr(\"class\")) {\n\t\t\t\t\tlet dish = $(this).attr(\"class\").split(/\\s+/)[0];\n\t\t\t\t\tif (dish === \"active\") {\n\t\t\t\t\t\tcurrent_index = index;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tif (current_index > 0) {\n\t\t\t$(\".btn.left\")[0].href =\n\t\t\t\t$(\".sidebar-column\").find(\"a\")[current_index - 1].href;\n\t\t\t$(\".btn.left\")[0].innerHTML =\n\t\t\t\t\"\u2190\" + $(\".sidebar-column\").find(\"a\")[current_index - 1].innerHTML;\n\t\t} else {\n\t\t\t$(\".btn.left\").hide();\n\t\t}\n\n\t\tif (current_index >= 0 && current_index < $(\".sidebar-column\").find(\"a\").length - 1) {\n\t\t\t$(\".btn.right\")[0].href =\n\t\t\t\t$(\".sidebar-column\").find(\"a\")[current_index + 1].href;\n\t\t\t$(\".btn.right\")[0].innerHTML =\n\t\t\t\t$(\".sidebar-column\").find(\"a\")[current_index + 1].innerHTML + \"\u2192\";\n\t\t} else {\n\t\t\t$(\".btn.right\").hide();\n\t\t}\n\t}\n};\n", "window.EditWikiAr = class EditWikiAr extends Wiki {\n\tconstructor() {\n\t\tsuper();\n\t\tfrappe.provide(\"frappe.ui.keys\");\n\t\t$(\"document\").ready(() => {\n\t\t\tfrappe\n\t\t\t\t.call(\"wiki.wiki.doctype.wiki_page.wiki_page.get_sidebar_for_page\", {\n\t\t\t\t\twiki_page: $('[name=\"wiki_page\"]').val(),\n\t\t\t\t})\n\t\t\t\t.then((result) => {\n\t\t\t\t\t$(\".doc-sidebar\").empty().append(result.message);\n\t\t\t\t\tthis.activate_sidebars();\n\t\t\t\t\tthis.set_active_sidebar();\n\t\t\t\t\tthis.set_empty_ul();\n\t\t\t\t\tthis.set_sortable();\n\t\t\t\t\tthis.set_add_item();\n\t\t\t\t\tthis.scrolltotop()\n\t\t\t\t});\n\t\t});\n\t}\n\n\tactivate_sidebars() {\n\t\t$(\".sidebar-item\").each(function (index) {\n\t\t\tconst active_class = \"active\";\n\t\t\tlet page_href = window.location.pathname;\n\t\t\tif (page_href.indexOf(\"#\") !== -1) {\n\t\t\t\tpage_href = page_href.slice(0, page_href.indexOf(\"#\"));\n\t\t\t}\n\t\t\tif (page_href.split('/').slice(0,-1).join('/')== $(this).data(\"route\")) {\n\n\t\t\t\tif ($('[name=\"new\"]').first().val()) {\n\t\t\t\t\t$(`\n\t\t\t\t\t<li class=\"sidebar-item active\" data-type=\"Wiki Page\" data-name=\"new-wiki-page\" data-new=1>\n\t\t\t\t\t\t<div><div>\n\t\t\t\t\t\t\t<a href=\"#\"  class ='active'>\u0635\u0641\u062D\u0629 \u0648\u064A\u0643\u064A \u062C\u062F\u064A\u062F\u0629</a>\n\t\t\t\t\t\t</div></div>\n\t\t\t\t\t</li>\n\t\t\t\t`).insertAfter($(this));\n\t\t\t\t} else {\n\t\t\t\t\t$(this).addClass(active_class);\n\t\t\t\t\t$(this).find(\"a\").addClass(active_class);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t// scroll the active sidebar item into view\n\t\tlet active_sidebar_item = $(\".sidebar-item.active\");\n\t\tif (active_sidebar_item.length > 0) {\n\t\t\tactive_sidebar_item.get(0).scrollIntoView(true, {\n\t\t\t\tbehavior: \"smooth\",\n\t\t\t\tblock: \"nearest\",\n\t\t\t});\n\t\t}\n\t}\n\n\tset_empty_ul() {\n\t\t$(\".collapsible\").each(function () {\n\t\t\tif ($(this).parent().find(\"ul\").length == 0) {\n\t\t\t\t$(this)\n\t\t\t\t\t.parent()\n\t\t\t\t\t.append(\n\t\t\t\t\t\t$(`<ul class=\"list-unstyled hidden\" style=\"min-height:20px;\"> </ul`)\n\t\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\tset_sortable() {\n\t\t$(\".web-sidebar ul\").each(function () {\n\t\t\tnew Sortable(this, {\n\t\t\t\tgroup: {\n\t\t\t\t\tname: \"qux\",\n\t\t\t\t\tput: [\"qux\"],\n\t\t\t\t\tpull: [\"qux\"],\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tset_add_item() {\n\t\n\t\t$(`<div class=\"text-muted add-sidebar-item small\">+ \u0627\u0636\u0627\u0641\u0629 \u0639\u0646\u0635\u0631 </div>\n\t\t\t<div class=\"text-muted small mt-3\"><i>\u0627\u0633\u062D\u0628 \u0627\u0644\u0639\u0646\u0627\u0635\u0631 \u0644\u0625\u0639\u0627\u062F\u0629 \u062A\u0631\u062A\u064A\u0628\u0647\u0627 </i></div>`).appendTo(\n\t\t\t$(\".web-sidebar\")\n\t\t);\n\t\tvar me = this;\n\t\t$(\".add-sidebar-item\").click(function () {\n\t\t\tvar dfs = me.get_add_new_item_dialog_fields();\n\n\t\t\tvar dialog = new frappe.ui.Dialog({\n\t\t\t\ttitle: \"Add to sidebar\",\n\t\t\t\tfields: dfs,\n\t\t\t\tprimary_action: function (fields) {\n\t\t\t\t\tif (fields.type == \"Add Wiki Page\") {\n\t\t\t\t\t\tme.add_wiki_page(fields);\n\t\t\t\t\t} else if(fields.type == \"Group\") {\n\t\t\t\t\t\tme.add_wiki_sidebar(fields);\n\t\t\t\t\t} else if(fields.type == \"Page\"){\n\t\t\t\t\t\tme.add_wiki_sidebar_page(fields);\n\t\t\t\t\t}\n\t\t\t\t\tdialog.hide();\n\t\t\t\t},\n\t\t\t});\n\t\t\tdialog.show();\n\t\t});\n\t}\n\n\tget_add_new_item_dialog_fields() {\n\t\treturn [\n\t\t\t{\n\t\t\t\tfieldname: \"type\",\n\t\t\t\tlabel: \"Do you want to add a page or group?\",\n\t\t\t\tfieldtype: \"Select\",\n\t\t\t\toptions: [\"Page\", \"Group\"],\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"wiki_page\",\n\t\t\t\tlabel: \"Wiki Page\",\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\toptions: \"Wiki Page\",\n\t\t\t\tdepends_on: \"eval: doc.type=='Page'\",\n\t\t\t\tmandatory_depends_on: \"eval: doc.type=='Page'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"route\",\n\t\t\t\tlabel: \"Route\",\n\t\t\t\tfieldtype: \"Data\",\n\t\t\t\tdepends_on: \"eval: doc.type=='Group'\",\n\t\t\t\tmandatory_depends_on: \"eval: doc.type=='Group'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"title\",\n\t\t\t\tlabel: \"Title\",\n\t\t\t\tfieldtype: \"Data\",\n\t\t\t\tdepends_on: \"eval: doc.type=='Group'\",\n\t\t\t\tmandatory_depends_on: \"eval: doc.type=='Group'\",\n\t\t\t},\n\t\t];\n\t}\n\n\tadd_wiki_page(fields) {\n\t\tvar me = this;\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.client.get_value\",\n\t\t\targs: {\n\t\t\t\tdoctype: \"Wiki Page\",\n\t\t\t\tfieldname: \"title\",\n\t\t\t\tfilters: fields.wiki_page,\n\t\t\t},\n\t\t\tcallback: function (r) {\n\t\t\t\tlet $new_page = me.get_new_page_html(r, fields);\n\n\t\t\t\t$new_page.appendTo(\n\t\t\t\t\t$(\".doc-sidebar .sidebar-items\")\n\t\t\t\t\t\t.children(\".list-unstyled\")\n\t\t\t\t\t\t.not(\".hidden\")\n\t\t\t\t\t\t.first()\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\tget_new_page_html(r, fields) {\n\t\treturn $(`\n\t\t<li class=\"sidebar-item\" data-type=\"Wiki Page\"\n\t\t\tdata-name=\"${fields.wiki_page}\" data-new=1 >\n\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t\t<a href=\"#\" class=\"green\" >\n\t\t\t\t\t\t\t${r.message.title}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</li>\n\t\t`);\n\t}\n\n\tadd_wiki_sidebar(fields) {\n\t\tlet $new_page = this.get_wiki_sidebar_html(fields);\n\n\t\t$new_page.appendTo(\n\t\t\t$(\".doc-sidebar .sidebar-items\")\n\t\t\t\t.children(\".list-unstyled\")\n\t\t\t\t.not(\".hidden\")\n\t\t\t\t.first()\n\t\t);\n\n\t\t$(\".web-sidebar ul\").each(function () {\n\t\t\tnew Sortable(this, {\n\t\t\t\tgroup: {\n\t\t\t\t\tname: \"qux\",\n\t\t\t\t\tput: [\"qux\"],\n\t\t\t\t\tpull: [\"qux\"],\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tadd_wiki_sidebar_page(fields) {\n\t\tvar me = this;\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.client.get\",\n\t\t\targs: {\n\t\t\t\tdoctype: \"Wiki Page\",\n\t\t\t\tname: fields.wiki_page,\n\t\t\t},\n\t\t\tcallback: function (r) {\n\t\t\t\tlet $new_page = me.get_wiki_sidebar_html(r.message);\n\n\t\t\t\t$new_page.appendTo(\n\t\t\t\t\t$(\".doc-sidebar .sidebar-items\")\n\t\t\t\t\t\t.children(\".list-unstyled\")\n\t\t\t\t\t\t.not(\".hidden\")\n\t\t\t\t\t\t.first()\n\t\t\t\t);\n\n\t\t\t\t$(\".web-sidebar ul\").each(function () {\n\t\t\t\t\tnew Sortable(this, {\n\t\t\t\t\t\tgroup: {\n\t\t\t\t\t\t\tname: \"qux\",\n\t\t\t\t\t\t\tput: [\"qux\"],\n\t\t\t\t\t\t\tpull: [\"qux\"],\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\tget_wiki_sidebar_html(fields) {\n\t\treturn $(`\n\t\t\t<li class=\"sidebar-group\" data-type=\"Wiki Sidebar\"\n\t\t\t\tdata-name=\"new-sidebar\" data-group-name=\"${fields.route}\"\n\t\t\t\tdata-new=1 data-title=\"${fields.title}\" draggable=\"false\">\n\n\t\t\t\t<div class=\"collapsible\">\n\t\t\t\t\t<span class=\"drop-icon hidden\">\n\t\t\t\t\t\t\t<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path d=\"M8 10L12 14L16 10\" stroke=\"#4C5A67\"\n\t\t\t\t\t\t\t\tstroke-miterlimit=\"10\" stroke-linecap=\"round\"\n\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"></path>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<span class=\"drop-left\">\n\t\t\t\t\t\t\t<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\tfill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path d=\"M10 16L14 12L10 8\" stroke=\"#4C5A67\"\n\t\t\t\t\t\t\t\tstroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"h6\">${fields.title}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<ul class=\"list-unstyled hidden\" style=\"min-height:20px;\"> </ul>\n\t\t\t</li>\n\t\t\t`);\n\t}\n};\n", "window.EditAssetAr = class EditAssetAr {\n\tconstructor() {\n\t\tthis.make_code_field_group();\n\t\tthis.add_attachment_popover();\n\t\t// remove this once the pr related to code editor max lines is merged\n\t\tthis.set_code_editor_height();\n\t\tthis.render_preview();\n\t\tthis.add_attachment_handler();\n\t\tthis.set_listeners();\n\t\tthis.create_comment_box();\n\t\tthis.make_title_editable();\n\t\tthis.render_sidebar_diff()\n\t}\n\n\tmake_code_field_group() {\n\t\tthis.code_field_group = new frappe.ui.FieldGroup({\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"type\",\n\t\t\t\t\tfieldtype: \"Data\",\n\t\t\t\t\tdefault: \"Rich Text\",\n\t\t\t\t\toptions: \"Rich Text\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"code_html\",\n\t\t\t\t\tfieldtype: \"Text Editor\",\n\t\t\t\t\tdefault: $(\".wiki-content-html\").html(),\n\t\t\t\t\tdepends_on: 'eval:doc.type==\"Rich Text\"',\n\t\t\t\t},\n\t\t\t],\n\t\t\tbody: $(\".wiki-write\").get(0),\n\t\t});\n\t\tthis.code_field_group.make();\n\t\t$(\".wiki-write .form-section:last\").removeClass(\"empty-section\");\n\t}\n\n\tget_attachment_controls_html() {\n\t\treturn `\n\t\t\t<div class=\"attachment-controls\">\n\t\t\t\t<div class=\"show-attachments\" tabindex=\"-1\" data-trigger=\"focus\">\n\t\t\t\t\t${this.get_show_uploads_svg()}\n\t\t\t\t\t<span class=\"number\">0</span> \u0627\u0644\u0645\u0631\u0641\u0642\n\t\t\t\t</div>\n\t\t\t\t<div class=\"add-attachment-wiki\">\n\t\t\t\t\t<span class=\"btn\">\n\t\t\t\t\t\t${this.get_upload_image_svg()}\n\t\t\t\t\t\t\u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u0631\u0641\u0642\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tget_show_uploads_svg() {\n\t\treturn `<svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<path d=\"M12.6004 6.68841L7.6414 11.5616C6.23259 12.946 3.8658 12.946 2.45699 11.5616C1.04819 10.1772\n\t\t\t1.04819 7.85132 2.45699 6.4669L6.85247 2.14749C7.86681 1.15071 9.44467 1.15071 10.459 2.14749C11.4733\n\t\t\t3.14428 11.4733 4.69483 10.459 5.69162L6.40165 9.62339C5.83813 10.1772 4.93649 10.1772 4.42932 9.62339C3.8658\n\t\t\t9.06962 3.8658 8.18359 4.42932 7.68519L7.81045 4.36257\" stroke=\"#2D95F0\" stroke-miterlimit=\"10\" stroke-linecap=\"round\"/>\n\t\t</svg>`\n\t}\n\n\tget_upload_image_svg() {\n\t\treturn `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<path d=\"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899\n\t\t\t 4.41015 14.5 8 14.5Z\" stroke=\"#505A62\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n\t\t\t<path d=\"M8 4.75V11.1351\" stroke=\"#505A62\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n\t\t\t<path d=\"M5.29102 7.45833L7.99935 4.75L10.7077 7.45833\" stroke=\"#505A62\" stroke-miterlimit=\"10\" stroke-linecap=\"round\"\n\t\t\tstroke-linejoin=\"round\"/>\n\t\t</svg>`\n\n\t}\n\n\tadd_attachment_popover() {\n\t\t$(\".show-attachments\").popover({\n\t\t\tplacement: \"bottom\",\n\t\t\tcontent: () => {\n\t\t\t\treturn this.build_attachment_table();\n\t\t\t},\n\t\t\thtml: true,\n\t\t});\n\t}\n\n\tbuild_attachment_table() {\n\t\tvar wrapper = $('<div class=\"wiki-attachment\"></div>');\n\t\twrapper.empty();\n\n\t\tvar table = $(this.get_attachment_table_header_html()).appendTo(wrapper);\n\t\tif (!this.attachments || !this.attachments.length)\n\t\t\treturn \"No attachments uploaded\";\n\n        const caption = file_url => file_url\n            .split(\"/\").pop()                     // filename\n            .split(\".\").slice(0, -1).join(\".\")    // filename without extension\n            .replaceAll(\"_\", \" \")\n            .replaceAll(\"-\", \" \");\n\n\t\tthis.attachments.forEach((f) => {\n\t\t\tconst row = $(\"<tr></tr>\").appendTo(table.find(\"tbody\"));\n\t\t\t$(`<td>${f.file_name}</td>`).appendTo(row);\n\t\t\t$(`<td>\n\t\t\t<a class=\"btn btn-default btn-xs btn-primary-light text-nowrap copy-link\" data-link=\"![${caption(f.file_url)}](${f.file_url})\" data-name = \"${f.file_name}\" >\n\t\t\t\tCopy Link\n\t\t\t</a>\n\t\t\t</td>`).appendTo(row);\n\t\t\t$(`<td>\n\n\t\t\t<a class=\"btn btn-default btn-xs  center delete-button\"  data-name = \"${f.file_name}\" >\n\t\t\t<svg class=\"icon icon-sm\"><use xlink:href=\"#icon-delete\"></use></svg>\n\n\t\t\t</a>\n\t\t\t</td>`).appendTo(row);\n\t\t});\n\t\treturn wrapper;\n\t}\n\n\tget_attachment_table_header_html() {\n\t\treturn `<table class=\"table  attachment-table\" \">\n\t\t\t<tbody></tbody>\n\t\t</table>`;\n\t}\n\n\tset_code_editor_height() {\n\t\tsetTimeout(() => {\n\t\t\t// expand_code_editor\n\t\t\tconst code_md = this.code_field_group.get_field(\"code_md\");\n\t\t\tcode_md.expanded = !this.expanded;\n\t\t\tcode_md.refresh_height();\n\t\t\tcode_md.toggle_label();\n\t\t}, 120);\n\t}\n\n\traise_patch(draft = false) {\n\t\tvar side = {};\n\n\t\tlet name = $(\".doc-sidebar .web-sidebar\").get(0).dataset.name;\n\t\tside[name] = [];\n\t\tlet items = $($(\".doc-sidebar .web-sidebar\").get(0))\n\t\t\t.children(\".sidebar-items\")\n\t\t\t.children(\"ul\")\n\t\t\t.not(\".hidden\")\n\t\t\t.children(\"li\");\n\t\titems.each((item) => {\n\t\t\tif (!items[item].dataset.name) return;\n\t\t\tside[name].push({\n\t\t\t\tname: items[item].dataset.name,\n\t\t\t\ttype: items[item].dataset.type,\n\t\t\t\tnew: items[item].dataset.new,\n\t\t\t\ttitle: items[item].dataset.title,\n\t\t\t\tgroup_name: items[item].dataset.groupName,\n\t\t\t});\n\t\t});\n\n\t\t$('.doc-sidebar [data-type=\"Wiki Sidebar\"]').each(function () {\n\t\t\tlet name = $(this).get(0).dataset.groupName;\n\t\t\tside[name] = [];\n\t\t\tlet items = $(this).children(\"ul\").children(\"li\");\n\t\t\titems.each((item) => {\n\t\t\t\tif (!items[item].dataset.name) return;\n\t\t\t\tside[name].push({\n\t\t\t\t\tname: items[item].dataset.name,\n\t\t\t\t\ttype: items[item].dataset.type,\n\t\t\t\t\tnew: items[item].dataset.new,\n\t\t\t\t\ttitle: items[item].dataset.title,\n\t\t\t\t\tgroup_name: items[item].dataset.groupName,\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tvar me = this;\n\t\tvar dfs = [];\n\t\tconst title_of_page = $('.edit-title span').text();\n\t\tdfs.push(\n\t\t\t{\n\t\t\t\tfieldname: \"edit_message\",\n\t\t\t\tfieldtype: \"Text\",\n\t\t\t\tlabel: \"Message\",\n\t\t\t\tdefault: $('[name=\"new\"]').val()\n\t\t\t\t\t? `Add new page: ${title_of_page}`\n\t\t\t\t\t: `${title_of_page} \u062A\u0645 \u062A\u062D\u0631\u064A\u0631\u0647`,\n\t\t\t\tmandatory: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"sidebar_edited\",\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t\tlabel: \"\u0644\u0642\u062F \u0642\u0645\u062A \u0628\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0634\u0631\u064A\u0637 \u0627\u0644\u062C\u0627\u0646\u0628\u064A\",\n\t\t\t\tdefault: $('[name=\"new\"]').val() ? 1 : 0,\n\t\t\t}\n\t\t);\n\n\t\tlet dialog = new frappe.ui.Dialog({\n\t\t\tfields: dfs,\n\t\t\ttitle: __(\"\u0631\u062C\u0649 \u0648\u0635\u0641 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A \u0627\u0644\u062E\u0627\u0635\u0629 \u0628\u0643\"),\n\t\t\tprimary_action_label: __(\"\u0623\u0631\u0633\u0644 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A\"),\n\t\t\tprimary_action: function () {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"wiki.wiki.doctype.wiki_page.wiki_page.update\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tname: $('[name=\"wiki_page\"]').val(),\n\t\t\t\t\t\twiki_page_patch: $('[name=\"wiki_page_patch\"]').val(),\n\t\t\t\t\t\tmessage: this.get_value(\"edit_message\"),\n\t\t\t\t\t\tsidebar_edited: this.get_value(\"sidebar_edited\"),\n\t\t\t\t\t\tcontent: me.content,\n\t\t\t\t\t\ttype: me.code_field_group.get_value(\"type\"),\n\t\t\t\t\t\tattachments: me.attachments,\n\t\t\t\t\t\tnew: $('[name=\"new\"]').val(),\n\t\t\t\t\t\ttitle: $('.edit-title span').text(),\n\t\t\t\t\t\tnew_sidebar: $(\".doc-sidebar\").get(0).innerHTML,\n\t\t\t\t\t\tnew_sidebar_items: side,\n\t\t\t\t\t\tdraft:draft ? draft : null\n\t\t\t\t\t},\n\t\t\t\t\tcallback: (r) => {\n\t\t\t\t\t\tif (!r.message.approved && r.message.route == 'contributions') {\n\t\t\t\t\t\t\tfrappe.msgprint({\n\t\t\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t\t\t\"\u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u0637\u0644\u0628 \u062A\u063A\u064A\u064A\u0631. \u064A\u0645\u0643\u0646\u0643 \u062A\u062A\u0628\u0639 \u0637\u0644\u0628\u0627\u062A\u0643 \u0639\u0644\u0649 \u0635\u0641\u062D\u0629 \u0627\u0644\u0645\u0633\u0627\u0647\u0645\u0627\u062A\",\n\t\t\t\t\t\t\t\tindicator: \"green\",\n\t\t\t\t\t\t\t\ttitle: \"\u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u0637\u0644\u0628 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\",\n\t\t\t\t\t\t\t\talert: 1\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (!r.message.approved && r.message.route == 'drafts') {\n\t\t\t\t\t\t\tfrappe.msgprint({\n\t\t\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t\t\t\"\u062A\u0645 \u062D\u0641\u0638 \u0627\u0644\u0645\u0633\u0648\u062F\u0629\",\n\t\t\t\t\t\t\t\tindicator: \"green\",\n\t\t\t\t\t\t\t\ttitle: \"\u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u0637\u0644\u0628 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\",\n\t\t\t\t\t\t\t\talert: 1\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// route back to the main page\n\t\t\t\t\t\twindow.location.href = '/' + r.message.route;\n\t\t\t\t\t},\n\t\t\t\t\tfreeze: true,\n\t\t\t\t});\n\t\t\t\tdialog.hide();\n\t\t\t\t$(\"#freeze\").addClass(\"show\");\n\t\t\t},\n\t\t});\n\t\tdialog.show();\n\t}\n\n\trender_preview() {\n\t\t$('a[data-toggle=\"tab\"]').on(\"click\", (e) => {\n\t\t\tlet activeTab = $(e.target);\n\n\t\t\tif (\n\t\t\t\tactiveTab.prop(\"id\") === \"preview-tab\" ||\n\t\t\t\tactiveTab.prop(\"id\") === \"diff-tab\"\n\t\t\t) {\n\t\t\t\tlet $preview = $(\".wiki-preview\");\n\t\t\t\tlet $diff = $(\".wiki-diff\");\n\t\t\t\tconst type = this.code_field_group.get_value(\"type\");\n\t\t\t\tlet content = \"\";\n\t\t\t\tif (type == \"Markdown\") {\n\t\t\t\t\tcontent = this.code_field_group.get_value(\"code_md\");\n\t\t\t\t} else {\n\t\t\t\t\tcontent = this.code_field_group.get_value(\"code_html\");\n\t\t\t\t\tvar turndownService = new TurndownService();\n\t\t\t\t\tturndownService = turndownService.keep([\"div class\", \"iframe\"]);\n\t\t\t\t\tcontent = turndownService.turndown(content);\n\t\t\t\t}\n\t\t\t\tif (!content) {\n\t\t\t\t\tthis.set_empty_message($preview, $diff);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.set_loading_message($preview, $diff);\n\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"wiki.wiki.doctype.wiki_page.wiki_page.preview\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tcontent: content,\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\tpath: this.route,\n\t\t\t\t\t\tname: $('[name=\"wiki_page\"]').val(),\n\t\t\t\t\t\tattachments: this.attachments,\n\t\t\t\t\t\tnew: $('[name=\"new\"]').val(),\n\t\t\t\t\t},\n\t\t\t\t\tcallback: (r) => {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\t$preview.html(r.message.html);\n\t\t\t\t\t\t\tif (!$('[name=\"new\"]').val()) {\n\t\t\t\t\t\t\t\tconst empty_diff = `<div class=\"text-muted center\"> \u0644\u0645 \u064A\u062A\u0645 \u0625\u062C\u0631\u0627\u0621 \u0623\u064A \u062A\u063A\u064A\u064A\u0631\u0627\u062A</div>`\n\t\t\t\t\t\t\t\tconst diff_html = $(r.message.diff).find('.insert, .delete').length?r.message.diff:empty_diff\n\t\t\t\t\t\t\t\t$diff.html(diff_html);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tset_empty_message($preview, $diff) {\n\t\t$preview.html(\"<div>\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u0636\u0627\u0641\u0629 \u0628\u0639\u0636 \u0627\u0644\u0643\u0648</div>\");\n\t\t$diff.html(\"<div>\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u0636\u0627\u0641\u0629 \u0628\u0639\u0636 \u0627\u0644\u0643\u0648</div>\");\n\t}\n\n\tset_loading_message($preview, $diff) {\n\t\t$preview.html(\"...\u0645\u0639\u0627\u064A\u0646\u0629 \u0627\u0644\u062A\u062D\u0645\u064A\u0644\");\n\t\t$diff.html(\"...\u0641\u0631\u0642 \u0627\u0644\u062A\u062D\u0645\u064A\u0644\");\n\t}\n\n\tadd_attachment_handler() {\n\t\tvar me = this;\n\t\t$(\".add-attachment-wiki\").click(function () {\n\t\t\tme.new_attachment();\n\t\t});\n\t\t$(\".submit-wiki-page\").click(function () {\n\t\t\tme.get_markdown();\n\t\t});\n\n\t\t$(\".draft-wiki-page\").click(function () {\n\t\t\t// setting draft as true\n\t\t\tme.get_markdown(true);\n\t\t});\n\t}\n\n\tnew_attachment() {\n\t\tif (this.dialog) {\n\t\t\t// remove upload dialog\n\t\t\tthis.dialog.$wrapper.remove();\n\t\t}\n\n\t\tnew frappe.ui.FileUploader({\n\t\t\tfolder: \"Home/Attachments\",\n\t\t\ton_success: (file_doc) => {\n\t\t\t\tif (!this.attachments) this.attachments = [];\n\t\t\t\tif (!this.save_paths) this.save_paths = {};\n\t\t\t\tthis.attachments.push(file_doc);\n\t\t\t\t$(\".wiki-attachment\").empty().append(this.build_attachment_table());\n\t\t\t\t$(\".attachment-controls\").find(\".number\").text(this.attachments.length);\n\t\t\t},\n\t\t});\n\t}\n\n\tget_markdown(draft = false) {\n\t\tvar me = this;\n\n\t\tif (me.code_field_group.get_value(\"type\") == \"Markdown\") {\n\t\t\tthis.content = me.code_field_group.get_value(\"code_md\");\n\t\t\tthis.raise_patch(draft);\n\t\t} else {\n\t\t\tthis.content = this.code_field_group.get_value(\"code_html\");\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod:\n\t\t\t\t\t\"wiki.wiki.doctype.wiki_page.wiki_page.extract_images_from_html\",\n\t\t\t\targs: {\n\t\t\t\t\tcontent: this.content,\n\t\t\t\t},\n\t\t\t\tcallback: (r) => {\n\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\tme.content = r.message;\n\t\t\t\t\t\tvar turndownService = new TurndownService();\n\t\t\t\t\t\tturndownService = turndownService.keep([\"div class\", \"iframe\"]);\n\t\t\t\t\t\tme.content = turndownService.turndown(me.content);\n\t\t\t\t\t\tme.raise_patch(draft);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tset_listeners() {\n\t\tvar me = this;\n\n\t\t$(`body`).on(\"click\", `.copy-link`, function () {\n\t\t\tfrappe.utils.copy_to_clipboard($(this).attr(\"data-link\"));\n\t\t});\n\n\t\t$(`body`).on(\"click\", `.delete-button`, function () {\n\t\t\tfrappe.confirm(\n\t\t\t\t`\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0623\u0646\u0643 \u062A\u0631\u064A\u062F \u062D\u0630\u0641 \u0627\u0644\u0645\u0644\u0641 \"${$(this).attr(\n\t\t\t\t\t\"data-name\"\n\t\t\t\t)}\"`,\n\t\t\t\t() => {\n\t\t\t\t\tme.attachments.forEach((f, index, object) => {\n\t\t\t\t\t\tif (f.file_name == $(this).attr(\"data-name\")) {\n\t\t\t\t\t\t\tobject.splice(index, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t$(\".wiki-attachment\").empty().append(me.build_attachment_table());\n\t\t\t\t\t$(\".attachment-controls\").find(\".number\").text(me.attachments.length);\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tcreate_comment_box() {\n\t\tthis.comment_box = frappe.ui.form.make_control({\n\t\t\tparent: $(\".comment-box\"),\n\t\t\tdf: {\n\t\t\t\tfieldname: \"new_comment\",\n\t\t\t\tfieldtype: \"Comment\",\n\t\t\t},\n\t\t\tenable_mentions: false,\n\t\t\trender_input: true,\n\t\t\tonly_input: true,\n\t\t\ton_submit: (comment) => {\n\t\t\t\tthis.add_comment_to_patch(comment);\n\t\t\t},\n\t\t});\n\t}\n\n\tadd_comment_to_patch(comment) {\n\t\tif (strip_html(comment).trim() != \"\") {\n\t\t\tthis.comment_box.disable();\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod:\n\t\t\t\t\t\"wiki.wiki.doctype.wiki_page_patch.wiki_page_patch.add_comment_to_patch\",\n\t\t\t\targs: {\n\t\t\t\t\treference_name: $('[name=\"wiki_page_patch\"]').val(),\n\t\t\t\t\tcontent: comment,\n\t\t\t\t\tcomment_email: frappe.session.user,\n\t\t\t\t\tcomment_by: frappe.session.user_fullname,\n\t\t\t\t},\n\t\t\t\tcallback: (r) => {\n\t\t\t\t\tcomment = r.message;\n\n\t\t\t\t\tthis.display_new_comment(comment, this.comment_box);\n\t\t\t\t},\n\t\t\t\talways: () => {\n\t\t\t\t\tthis.comment_box.enable();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tdisplay_new_comment(comment, comment_box) {\n\t\tif (comment) {\n\t\t\tcomment_box.set_value(\"\");\n\n\t\t\tconst new_comment = this.get_comment_html(\n\t\t\t\tcomment.owner,\n\t\t\t\tcomment.creation,\n\t\t\t\tcomment.timepassed,\n\t\t\t\tcomment.content\n\t\t\t);\n\n\t\t\t$(\".timeline-items\").prepend(new_comment);\n\t\t}\n\t}\n\n\tget_comment_html(owner, creation, timepassed, content) {\n\t\treturn $(`\n\t\t\t<div class=\"timeline-item\">\n\t\t\t\t<div class=\"timeline-badge\">\n\t\t\t\t\t<svg class=\"icon icon-md\">\n\t\t\t\t\t\t<use href=\"#icon-small-message\"></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"timeline-content frappe-card\">\n\t\t\t\t\t<div class=\"timeline-message-box\">\n\t\t\t\t\t\t<span class=\"flex justify-between\">\n\t\t\t\t\t\t\t<span class=\"text-color flex\">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t${owner}\n\t\t\t\t\t\t\t\t\t<span class=\"text-muted margin-left\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"frappe-timestamp \"\n\t\t\t\t\t\t\t\t\t\t\tdata-timestamp=\"${creation}\"\n\t\t\t\t\t\t\t\t\t\t\ttitle=\"${creation}\">${timepassed}</span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div class=\"content\">\n\t\t\t\t\t\t\t${content}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`);\n\t}\n\n\tmake_title_editable() {\n\t\tconst title_span = $(\".edit-title>span\");\n\t\tconst title_handle = $(\".edit-title>i\");\n\t\tconst title_input = $(\".edit-title>input\");\n\t\ttitle_handle.click(() => {\n\t\t\ttitle_span.addClass(\"hide\");\n\t\t\ttitle_handle.addClass(\"hide\");\n\t\t\ttitle_input.removeClass(\"hide\");\n\t\t\ttitle_input.val(title_span.text());\n\t\t\ttitle_input.focus();\n\t\t});\n\t\ttitle_input.focusout(() => {\n\t\t\ttitle_span.removeClass(\"hide\");\n\t\t\ttitle_handle.removeClass(\"hide\");\n\t\t\ttitle_input.addClass(\"hide\");\n\t\t\ttitle_span.text(title_input.val());\n\t\t});\n\t\ttitle_input.on('change', (e) => {\n\t\t\t$(\".doc-sidebar .sidebar-items a.active\").text(title_input.val())\n\t\t});\n\t}\n\n\tapprove_wiki_page() {\n\t\tfrappe.call({\n\t\t\tmethod: \"wiki.wiki.doctype.wiki_page.wiki_page.approve\",\n\t\t\targs: {\n\t\t\t\twiki_page_patch: $('[name=\"wiki_page_patch\"]').val(),\n\t\t\t},\n\t\t\tcallback: () => {\n\t\t\t\tfrappe.msgprint({\n\t\t\t\t\tmessage:\n\t\t\t\t\t\t\"The Change has been approved.\",\n\t\t\t\t\tindicator: \"green\",\n\t\t\t\t\ttitle: \"Approved\",\n\t\t\t\t});\n\t\t\t\twindow.location.href = '/' + $('[name=\"wiki_page\"]').val();\n\t\t\t},\n\t\t\tfreeze: true,\n\t\t});\n\n\t}\n\n\trender_sidebar_diff() {\n\t\tconst lis = $(\".sidebar-diff\");\n\t\tlet $new_sidebar_items = $('[name=\"new_sidebar_items\"]').val();\n\t\tconst sidebar_items = $new_sidebar_items && JSON.parse($new_sidebar_items);\n\t\tlis.empty();\n\t\tfor (let sidebar in sidebar_items) {\n\t\t\tfor (let item in sidebar_items[sidebar]) {\n\t\t\t\tlet class_name = (\".\" + sidebar).replaceAll(\"/\", \"\\\\/\");\n\t\t\t\tlet target = lis.find(class_name);\n\t\t\t\tif (!target.length) {\n\t\t\t\t\ttarget = $(\".sidebar-diff\");\n\t\t\t\t}\n\t\t\t\tif (sidebar_items[sidebar][item].type == \"Wiki Sidebar\") {\n\t\t\t\t\t$(target).append(\n\t\t\t\t\t\t\"<li>\" +\n\t\t\t\t\t\t\tsidebar_items[sidebar][item].title +\n\t\t\t\t\t\t\t\"</li>\" +\n\t\t\t\t\t\t\t\"<ul class=\" +\n\t\t\t\t\t\t\tsidebar_items[sidebar][item].group_name +\n\t\t\t\t\t\t\t\"></ul>\"\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t$(target).append(\n\t\t\t\t\t\t\"<li class=\" +\n\t\t\t\t\t\t\tsidebar_items[sidebar][item].group_name +\n\t\t\t\t\t\t\t\">\" +\n\t\t\t\t\t\t\tsidebar_items[sidebar][item].title +\n\t\t\t\t\t\t\t\"</li>\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n"],
  "mappings": "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",
  "names": []
}
