{
  "version": 3,
  "sources": ["../../../../../apps/one_wiki/one_wiki/public/js/edit_asset.js", "../../../../../apps/one_wiki/one_wiki/public/js/wiki.js", "../../../../../apps/one_wiki/one_wiki/public/js/edit_wiki.js", "../../../../../apps/one_wiki/one_wiki/public/js/render_wiki.js", "../../../../../apps/one_wiki/one_wiki/public/js/edit_wiki_ar.js", "../../../../../apps/one_wiki/one_wiki/public/js/edit_asset_ar.js"],
  "sourcesContent": ["window.EditAsset = class EditAsset {\n\tconstructor() {\n\t\tthis.make_code_field_group();\n\t\tthis.add_attachment_popover();\n\t\t// remove this once the pr related to code editor max lines is merged\n\t\tthis.set_code_editor_height();\n\t\tthis.render_preview();\n\t\tthis.add_attachment_handler();\n\t\tthis.set_listeners();\n\t\tthis.create_comment_box();\n\t\tthis.make_title_editable();\n\t\tthis.render_sidebar_diff()\n\t}\n\n\tmake_code_field_group() {\n\t\tthis.code_field_group = new frappe.ui.FieldGroup({\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"type\",\n\t\t\t\t\tfieldtype: \"Data\",\n\t\t\t\t\tdefault: \"Rich Text\",\n\t\t\t\t\toptions: \"Rich Text\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"language\",\n\t\t\t\t\tfieldtype: \"Select\",\n\t\t\t\t\toptions: ['','English','\u0639\u0631\u0628\u064A'],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"code_html\",\n\t\t\t\t\tfieldtype: \"Text Editor\",\n\t\t\t\t\tdefault: $(\".wiki-content-html\").html(),\n\t\t\t\t\tdepends_on: 'eval:doc.type==\"Rich Text\"',\n\t\t\t\t},\n\t\t\t],\n\t\t\tbody: $(\".wiki-write\").get(0),\n\t\t});\n\t\tthis.code_field_group.make();\n\t\t$(\".wiki-write .form-section:last\").removeClass(\"empty-section\");\n\t}\n\n\tget_attachment_controls_html() {\n\t\treturn `\n\t\t\t<div class=\"attachment-controls\">\n\t\t\t\t<div class=\"show-attachments\" tabindex=\"-1\" data-trigger=\"focus\">\n\t\t\t\t\t${this.get_show_uploads_svg()}\n\t\t\t\t\t<span class=\"number\">0</span> attachments\n\t\t\t\t</div>\n\t\t\t\t<div class=\"add-attachment-wiki\">\n\t\t\t\t\t<span class=\"btn\">\n\t\t\t\t\t\t${this.get_upload_image_svg()}\n\t\t\t\t\t\tUpload Attachment\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tget_show_uploads_svg() {\n\t\treturn `<svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<path d=\"M12.6004 6.68841L7.6414 11.5616C6.23259 12.946 3.8658 12.946 2.45699 11.5616C1.04819 10.1772\n\t\t\t1.04819 7.85132 2.45699 6.4669L6.85247 2.14749C7.86681 1.15071 9.44467 1.15071 10.459 2.14749C11.4733\n\t\t\t3.14428 11.4733 4.69483 10.459 5.69162L6.40165 9.62339C5.83813 10.1772 4.93649 10.1772 4.42932 9.62339C3.8658\n\t\t\t9.06962 3.8658 8.18359 4.42932 7.68519L7.81045 4.36257\" stroke=\"#2D95F0\" stroke-miterlimit=\"10\" stroke-linecap=\"round\"/>\n\t\t</svg>`\n\t}\n\n\tget_upload_image_svg() {\n\t\treturn `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<path d=\"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899\n\t\t\t 4.41015 14.5 8 14.5Z\" stroke=\"#505A62\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n\t\t\t<path d=\"M8 4.75V11.1351\" stroke=\"#505A62\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n\t\t\t<path d=\"M5.29102 7.45833L7.99935 4.75L10.7077 7.45833\" stroke=\"#505A62\" stroke-miterlimit=\"10\" stroke-linecap=\"round\"\n\t\t\tstroke-linejoin=\"round\"/>\n\t\t</svg>`\n\n\t}\n\n\tadd_attachment_popover() {\n\t\t$(\".show-attachments\").popover({\n\t\t\tplacement: \"bottom\",\n\t\t\tcontent: () => {\n\t\t\t\treturn this.build_attachment_table();\n\t\t\t},\n\t\t\thtml: true,\n\t\t});\n\t}\n\n\tbuild_attachment_table() {\n\t\tvar wrapper = $('<div class=\"wiki-attachment\"></div>');\n\t\twrapper.empty();\n\n\t\tvar table = $(this.get_attachment_table_header_html()).appendTo(wrapper);\n\t\tif (!this.attachments || !this.attachments.length)\n\t\t\treturn \"No attachments uploaded\";\n\n        const caption = file_url => file_url\n            .split(\"/\").pop()                     // filename\n            .split(\".\").slice(0, -1).join(\".\")    // filename without extension\n            .replaceAll(\"_\", \" \")\n            .replaceAll(\"-\", \" \");\n\n\t\tthis.attachments.forEach((f) => {\n\t\t\tconst row = $(\"<tr></tr>\").appendTo(table.find(\"tbody\"));\n\t\t\t$(`<td>${f.file_name}</td>`).appendTo(row);\n\t\t\t$(`<td>\n\t\t\t<a class=\"btn btn-default btn-xs btn-primary-light text-nowrap copy-link\" data-link=\"![${caption(f.file_url)}](${f.file_url})\" data-name = \"${f.file_name}\" >\n\t\t\t\tCopy Link\n\t\t\t</a>\n\t\t\t</td>`).appendTo(row);\n\t\t\t$(`<td>\n\n\t\t\t<a class=\"btn btn-default btn-xs  center delete-button\"  data-name = \"${f.file_name}\" >\n\t\t\t<svg class=\"icon icon-sm\"><use xlink:href=\"#icon-delete\"></use></svg>\n\n\t\t\t</a>\n\t\t\t</td>`).appendTo(row);\n\t\t});\n\t\treturn wrapper;\n\t}\n\n\tget_attachment_table_header_html() {\n\t\treturn `<table class=\"table  attachment-table\" \">\n\t\t\t<tbody></tbody>\n\t\t</table>`;\n\t}\n\n\tset_code_editor_height() {\n\t\tsetTimeout(() => {\n\t\t\t// expand_code_editor\n\t\t\tconst code_md = this.code_field_group.get_field(\"code_md\");\n\t\t\tcode_md.expanded = !this.expanded;\n\t\t\tcode_md.refresh_height();\n\t\t\tcode_md.toggle_label();\n\t\t}, 120);\n\t}\n\n\traise_patch(draft = false) {\n\t\tvar side = {};\n\t\t\n\t\tlet name = $(\".doc-sidebar .web-sidebar\").get(0).dataset.name;\n\t\tside[name] = [];\n\t\tlet items = $($(\".doc-sidebar .web-sidebar\").get(0))\n\t\t\t.children(\".sidebar-items\")\n\t\t\t.children(\"ul\")\n\t\t\t.not(\".hidden\")\n\t\t\t.children(\"li\");\n\t\titems.each((item) => {\n\t\t\tif (!items[item].dataset.name) return;\n\t\t\tside[name].push({\n\t\t\t\tname: items[item].dataset.name,\n\t\t\t\ttype: items[item].dataset.type,\n\t\t\t\tnew: items[item].dataset.new,\n\t\t\t\ttitle: items[item].dataset.title,\n\t\t\t\tgroup_name: items[item].dataset.groupName,\n\t\t\t});\n\t\t});\n\n\t\t$('.doc-sidebar [data-type=\"Wiki Sidebar\"]').each(function () {\n\t\t\tlet name = $(this).get(0).dataset.groupName;\n\t\t\tside[name] = [];\n\t\t\tlet items = $(this).children(\"ul\").children(\"li\");\n\t\t\titems.each((item) => {\n\t\t\t\tif (!items[item].dataset.name) return;\n\t\t\t\tside[name].push({\n\t\t\t\t\tname: items[item].dataset.name,\n\t\t\t\t\ttype: items[item].dataset.type,\n\t\t\t\t\tnew: items[item].dataset.new,\n\t\t\t\t\ttitle: items[item].dataset.title,\n\t\t\t\t\tgroup_name: items[item].dataset.groupName,\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tvar me = this;\n\t\tvar dfs = [];\n\t\tconst title_of_page = $('.edit-title span').text();\n\t\tdfs.push(\n\t\t\t{\n\t\t\t\tfieldname: \"edit_message\",\n\t\t\t\tfieldtype: \"Text\",\n\t\t\t\tlabel: \"Message\",\n\t\t\t\tdefault: $('[name=\"new\"]').val()\n\t\t\t\t\t? `Add new page: ${title_of_page}`\n\t\t\t\t\t: `Edited ${title_of_page}`,\n\t\t\t\tmandatory: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"sidebar_edited\",\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t\tlabel: \"I updated the sidebar\",\n\t\t\t\tdefault: $('[name=\"new\"]').val() ? 1 : 0,\n\t\t\t}\n\t\t);\n\t\t\n\t\tlet dialog = new frappe.ui.Dialog({\n\t\t\tfields: dfs,\n\t\t\ttitle: __(\"Please describe your changes\"),\n\t\t\tprimary_action_label: __(\"Submit Changes\"),\n\t\t\tprimary_action: function () {\n\t\t\t\t\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"one_wiki.overrides.overrides.update_create_patch\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tname: $('[name=\"wiki_page\"]').val(),\n\t\t\t\t\t\twiki_page_patch: $('[name=\"wiki_page_patch\"]').val(),\n\t\t\t\t\t\tmessage: this.get_value(\"edit_message\"),\n\t\t\t\t\t\tsidebar_edited: this.get_value(\"sidebar_edited\"),\n\t\t\t\t\t\tcontent: me.content,\n\t\t\t\t\t\ttype: me.code_field_group.get_value(\"type\"),\n\t\t\t\t\t\tlanguage:$('.ellipsis').val(),\n\t\t\t\t\t\tattachments: me.attachments,\n\t\t\t\t\t\tnew: $('[name=\"new\"]').val(),\n\t\t\t\t\t\ttitle: $('.edit-title span').text(),\n\t\t\t\t\t\tnew_sidebar: $(\".doc-sidebar\").get(0).innerHTML,\n\t\t\t\t\t\tnew_sidebar_items: side,\n\t\t\t\t\t\tdraft:draft ? draft : null\n\t\t\t\t\t},\n\t\t\t\t\tcallback: (r) => {\n\t\t\t\t\t\tif (!r.message.approved && r.message.route == 'contributions') {\n\t\t\t\t\t\t\tfrappe.msgprint({\n\t\t\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t\t\t\"A Change Request has been created. You can track your requests on the contributions page\",\n\t\t\t\t\t\t\t\tindicator: \"green\",\n\t\t\t\t\t\t\t\ttitle: \"Change Request Created\",\n\t\t\t\t\t\t\t\talert: 1\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (!r.message.approved && r.message.route == 'drafts') {\n\t\t\t\t\t\t\tfrappe.msgprint({\n\t\t\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t\t\t\"Draft Saved\",\n\t\t\t\t\t\t\t\tindicator: \"green\",\n\t\t\t\t\t\t\t\ttitle: \"Change Request Created\",\n\t\t\t\t\t\t\t\talert: 1\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// route back to the main page\n\t\t\t\t\t\twindow.location.href = '/' + r.message.route;\n\t\t\t\t\t},\n\t\t\t\t\tfreeze: true,\n\t\t\t\t});\n\t\t\t\tdialog.hide();\n\t\t\t\t$(\"#freeze\").addClass(\"show\");\n\t\t\t},\n\t\t});\n\t\tdialog.show();\n\t}\n\n\trender_preview() {\n\t\t$('a[data-toggle=\"tab\"]').on(\"click\", (e) => {\n\t\t\tlet activeTab = $(e.target);\n\n\t\t\tif (\n\t\t\t\tactiveTab.prop(\"id\") === \"preview-tab\" ||\n\t\t\t\tactiveTab.prop(\"id\") === \"diff-tab\"\n\t\t\t) {\n\t\t\t\tlet $preview = $(\".wiki-preview\");\n\t\t\t\tlet $diff = $(\".wiki-diff\");\n\t\t\t\tconst type = this.code_field_group.get_value(\"type\");\n\t\t\t\tlet content = \"\";\n\t\t\t\tif (type == \"Markdown\") {\n\t\t\t\t\tcontent = this.code_field_group.get_value(\"code_md\");\n\t\t\t\t} else {\n\t\t\t\t\tcontent = this.code_field_group.get_value(\"code_html\");\n\t\t\t\t\tvar turndownService = new TurndownService();\n\t\t\t\t\tturndownService = turndownService.keep([\"div class\", \"iframe\"]);\n\t\t\t\t\tcontent = turndownService.turndown(content);\n\t\t\t\t}\n\t\t\t\tif (!content) {\n\t\t\t\t\tthis.set_empty_message($preview, $diff);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.set_loading_message($preview, $diff);\n\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"wiki.wiki.doctype.wiki_page.wiki_page.preview\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tcontent: content,\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\tpath: this.route,\n\t\t\t\t\t\tname: $('[name=\"wiki_page\"]').val(),\n\t\t\t\t\t\tattachments: this.attachments,\n\t\t\t\t\t\tnew: $('[name=\"new\"]').val(),\n\t\t\t\t\t},\n\t\t\t\t\tcallback: (r) => {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\t$preview.html(r.message.html);\n\t\t\t\t\t\t\tif (!$('[name=\"new\"]').val()) {\n\t\t\t\t\t\t\t\tconst empty_diff = `<div class=\"text-muted center\"> No Changes made</div>`\n\t\t\t\t\t\t\t\tconst diff_html = $(r.message.diff).find('.insert, .delete').length?r.message.diff:empty_diff\n\t\t\t\t\t\t\t\t$diff.html(diff_html);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tset_empty_message($preview, $diff) {\n\t\t$preview.html(\"<div>Please add some code</div>\");\n\t\t$diff.html(\"<div>Please add some code</div>\");\n\t}\n\n\tset_loading_message($preview, $diff) {\n\t\t$preview.html(\"Loading preview...\");\n\t\t$diff.html(\"Loading diff...\");\n\t}\n\n\tadd_attachment_handler() {\n\t\tvar me = this;\n\t\t$(\".add-attachment-wiki\").click(function () {\n\t\t\tme.new_attachment();\n\t\t});\n\t\t$(\".submit-wiki-page\").click(function () {\n\t\t\tme.get_markdown();\n\t\t});\n\n\t\t$(\".draft-wiki-page\").click(function () {\n\t\t\t// setting draft as true\n\t\t\tme.get_markdown(true);\n\t\t});\n\t}\n\n\tnew_attachment() {\n\t\tif (this.dialog) {\n\t\t\t// remove upload dialog\n\t\t\tthis.dialog.$wrapper.remove();\n\t\t}\n\n\t\tnew frappe.ui.FileUploader({\n\t\t\tfolder: \"Home/Attachments\",\n\t\t\ton_success: (file_doc) => {\n\t\t\t\tif (!this.attachments) this.attachments = [];\n\t\t\t\tif (!this.save_paths) this.save_paths = {};\n\t\t\t\tthis.attachments.push(file_doc);\n\t\t\t\t$(\".wiki-attachment\").empty().append(this.build_attachment_table());\n\t\t\t\t$(\".attachment-controls\").find(\".number\").text(this.attachments.length);\n\t\t\t},\n\t\t});\n\t}\n\n\tget_markdown(draft = false) {\n\t\tvar me = this;\n\n\t\tif (me.code_field_group.get_value(\"type\") == \"Markdown\") {\n\t\t\tthis.content = me.code_field_group.get_value(\"code_md\");\n\t\t\tthis.raise_patch(draft);\n\t\t} else {\n\t\t\tthis.content = this.code_field_group.get_value(\"code_html\");\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod:\n\t\t\t\t\t\"wiki.wiki.doctype.wiki_page.wiki_page.extract_images_from_html\",\n\t\t\t\targs: {\n\t\t\t\t\tcontent: this.content,\n\t\t\t\t},\n\t\t\t\tcallback: (r) => {\n\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\tme.content = r.message;\n\t\t\t\t\t\tvar turndownService = new TurndownService();\n\t\t\t\t\t\tturndownService = turndownService.keep([\"div class\", \"iframe\"]);\n\t\t\t\t\t\tme.content = turndownService.turndown(me.content);\n\t\t\t\t\t\tme.raise_patch(draft);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tset_listeners() {\n\t\tvar me = this;\n\n\t\t$(`body`).on(\"click\", `.copy-link`, function () {\n\t\t\tfrappe.utils.copy_to_clipboard($(this).attr(\"data-link\"));\n\t\t});\n\n\t\t$(`body`).on(\"click\", `.delete-button`, function () {\n\t\t\tfrappe.confirm(\n\t\t\t\t`Are you sure you want to delete the file \"${$(this).attr(\n\t\t\t\t\t\"data-name\"\n\t\t\t\t)}\"`,\n\t\t\t\t() => {\n\t\t\t\t\tme.attachments.forEach((f, index, object) => {\n\t\t\t\t\t\tif (f.file_name == $(this).attr(\"data-name\")) {\n\t\t\t\t\t\t\tobject.splice(index, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t$(\".wiki-attachment\").empty().append(me.build_attachment_table());\n\t\t\t\t\t$(\".attachment-controls\").find(\".number\").text(me.attachments.length);\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tcreate_comment_box() {\n\t\tthis.comment_box = frappe.ui.form.make_control({\n\t\t\tparent: $(\".comment-box\"),\n\t\t\tdf: {\n\t\t\t\tfieldname: \"new_comment\",\n\t\t\t\tfieldtype: \"Comment\",\n\t\t\t},\n\t\t\tenable_mentions: false,\n\t\t\trender_input: true,\n\t\t\tonly_input: true,\n\t\t\ton_submit: (comment) => {\n\t\t\t\tthis.add_comment_to_patch(comment);\n\t\t\t},\n\t\t});\n\t}\n\n\tadd_comment_to_patch(comment) {\n\t\tif (strip_html(comment).trim() != \"\") {\n\t\t\tthis.comment_box.disable();\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod:\n\t\t\t\t\t\"wiki.wiki.doctype.wiki_page_patch.wiki_page_patch.add_comment_to_patch\",\n\t\t\t\targs: {\n\t\t\t\t\treference_name: $('[name=\"wiki_page_patch\"]').val(),\n\t\t\t\t\tcontent: comment,\n\t\t\t\t\tcomment_email: frappe.session.user,\n\t\t\t\t\tcomment_by: frappe.session.user_fullname,\n\t\t\t\t},\n\t\t\t\tcallback: (r) => {\n\t\t\t\t\tcomment = r.message;\n\n\t\t\t\t\tthis.display_new_comment(comment, this.comment_box);\n\t\t\t\t},\n\t\t\t\talways: () => {\n\t\t\t\t\tthis.comment_box.enable();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tdisplay_new_comment(comment, comment_box) {\n\t\tif (comment) {\n\t\t\tcomment_box.set_value(\"\");\n\n\t\t\tconst new_comment = this.get_comment_html(\n\t\t\t\tcomment.owner,\n\t\t\t\tcomment.creation,\n\t\t\t\tcomment.timepassed,\n\t\t\t\tcomment.content\n\t\t\t);\n\n\t\t\t$(\".timeline-items\").prepend(new_comment);\n\t\t}\n\t}\n\n\tget_comment_html(owner, creation, timepassed, content) {\n\t\treturn $(`\n\t\t\t<div class=\"timeline-item\">\n\t\t\t\t<div class=\"timeline-badge\">\n\t\t\t\t\t<svg class=\"icon icon-md\">\n\t\t\t\t\t\t<use href=\"#icon-small-message\"></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"timeline-content frappe-card\">\n\t\t\t\t\t<div class=\"timeline-message-box\">\n\t\t\t\t\t\t<span class=\"flex justify-between\">\n\t\t\t\t\t\t\t<span class=\"text-color flex\">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t${owner}\n\t\t\t\t\t\t\t\t\t<span class=\"text-muted margin-left\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"frappe-timestamp \"\n\t\t\t\t\t\t\t\t\t\t\tdata-timestamp=\"${creation}\"\n\t\t\t\t\t\t\t\t\t\t\ttitle=\"${creation}\">${timepassed}</span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div class=\"content\">\n\t\t\t\t\t\t\t${content}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`);\n\t}\n\n\tmake_title_editable() {\n\t\tconst title_span = $(\".edit-title>span\");\n\t\tconst title_handle = $(\".edit-title>i\");\n\t\tconst title_input = $(\".edit-title>input\");\n\t\ttitle_handle.click(() => {\n\t\t\ttitle_span.addClass(\"hide\");\n\t\t\ttitle_handle.addClass(\"hide\");\n\t\t\ttitle_input.removeClass(\"hide\");\n\t\t\ttitle_input.val(title_span.text());\n\t\t\ttitle_input.focus();\n\t\t});\n\t\ttitle_input.focusout(() => {\n\t\t\ttitle_span.removeClass(\"hide\");\n\t\t\ttitle_handle.removeClass(\"hide\");\n\t\t\ttitle_input.addClass(\"hide\");\n\t\t\ttitle_span.text(title_input.val());\n\t\t});\n\t\ttitle_input.on('change', (e) => {\n\t\t\t$(\".doc-sidebar .sidebar-items a.active\").text(title_input.val())\n\t\t});\n\t}\n\n\tapprove_wiki_page() {\n\t\tfrappe.call({\n\t\t\tmethod: \"wiki.wiki.doctype.wiki_page.wiki_page.approve\",\n\t\t\targs: {\n\t\t\t\twiki_page_patch: $('[name=\"wiki_page_patch\"]').val(),\n\t\t\t},\n\t\t\tcallback: () => {\n\t\t\t\tfrappe.msgprint({\n\t\t\t\t\tmessage:\n\t\t\t\t\t\t\"The Change has been approved.\",\n\t\t\t\t\tindicator: \"green\",\n\t\t\t\t\ttitle: \"Approved\",\n\t\t\t\t});\n\t\t\t\twindow.location.href = '/' + $('[name=\"wiki_page\"]').val();\n\t\t\t},\n\t\t\tfreeze: true,\n\t\t});\n\n\t}\n\n\trender_sidebar_diff() {\n\t\tconst lis = $(\".sidebar-diff\");\n\t\tlet $new_sidebar_items = $('[name=\"new_sidebar_items\"]').val();\n\t\tconst sidebar_items = $new_sidebar_items && JSON.parse($new_sidebar_items);\n\t\tlis.empty();\n\t\t\n\t\tfor (let sidebar in sidebar_items) {\n\t\t\tfor (let item in sidebar_items[sidebar]) {\n\t\t\t\tlet class_name = (\".\" + sidebar).replaceAll(\"/\", \"\\\\/\");\n\t\t\t\t\n\t\t\t\tclass_name = (\".\" + sidebar).replace(/[()]/g, '\\\\$&');\n\t\t\t\t\n\t\t\t\tlet target = lis.find(class_name);\n\t\t\t\tif (!target.length) {\n\t\t\t\t\ttarget = $(\".sidebar-diff\");\n\t\t\t\t}\n\t\t\t\tif (sidebar_items[sidebar][item].type == \"Wiki Sidebar\") {\n\t\t\t\t\t$(target).append(\n\t\t\t\t\t\t\"<li>\" +\n\t\t\t\t\t\t\tsidebar_items[sidebar][item].title +\n\t\t\t\t\t\t\t\"</li>\" +\n\t\t\t\t\t\t\t\"<ul class=\" +\n\t\t\t\t\t\t\tsidebar_items[sidebar][item].group_name +\n\t\t\t\t\t\t\t\"></ul>\"\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t$(target).append(\n\t\t\t\t\t\t\"<li class=\" +\n\t\t\t\t\t\t\tsidebar_items[sidebar][item].group_name +\n\t\t\t\t\t\t\t\">\" +\n\t\t\t\t\t\t\tsidebar_items[sidebar][item].title +\n\t\t\t\t\t\t\t\"</li>\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n", "window.Wiki = class Wiki {\n\tactivate_sidebars() {\n\t\t$(\".sidebar-item\").each(function (index) {\n\t\t\tconst active_class = \"active\";\n\t\t\tlet page_href = window.location.pathname;\n\t\t\tif (page_href.indexOf(\"#\") !== -1) {\n\t\t\t\tpage_href = page_href.slice(0, page_href.indexOf(\"#\"));\n\t\t\t}\n\t\t\tif ($(this).data(\"route\") == page_href) {\n\t\t\t\t$(this).addClass(active_class);\n\t\t\t\t$(this).find(\"a\").addClass(active_class);\n\t\t\t}\n\t\t});\n\t\t// scroll the active sidebar item into view\n\t\tlet active_sidebar_item = $(\".sidebar-item.active\");\n\t\tif (active_sidebar_item.length > 0) {\n\t\t\tactive_sidebar_item.get(1).scrollIntoView(true, {\n\t\t\t\tbehavior: \"smooth\",\n\t\t\t\tblock: \"nearest\",\n\t\t\t});\n\t\t}\n\t}\n\n\ttoggle_sidebar(event) {\n\t\t$(event.currentTarget).parent().children(\"ul\").toggleClass(\"hidden\");\n\t\t$(event.currentTarget).find(\".drop-icon\").toggleClass(\"hidden\");\n\t\t$(event.currentTarget).find(\".drop-left\").toggleClass(\"hidden\");\n\t\tevent.stopPropagation();\n\t}\n\n\tset_active_sidebar() {\n\t\t$(\".doc-sidebar,.web-sidebar\").on(\n\t\t\t\"click\",\n\t\t\t\".collapsible\",\n\t\t\tthis.toggle_sidebar\n\t\t);\n\t\t$(\".sidebar-group\").children(\"ul\").addClass(\"hidden\");\n\t\t$(\".sidebar-item.active\")\n\t\t\t.parents(\" .web-sidebar .sidebar-group>ul\")\n\t\t\t.removeClass(\"hidden\");\n\t\tconst sidebar_groups = $(\".sidebar-item.active\").parents(\n\t\t\t\".web-sidebar .sidebar-group\"\n\t\t);\n\t\tsidebar_groups.each(function () {\n\t\t\t$(this).children(\".collapsible\").find(\".drop-left\").addClass(\"hidden\");\n\t\t});\n\t\tsidebar_groups.each(function () {\n\t\t\t$(this).children(\".collapsible\").find(\".drop-icon\").removeClass(\"hidden\");\n\t\t});\n\t}\n\n\tscrolltotop() {\n\t\t$('html,body').animate({scrollTop:0},0);\n\t}\n};\n", "window.EditWiki = class EditWiki extends Wiki {\n\tconstructor() {\n\t\tsuper();\n\t\tfrappe.provide(\"frappe.ui.keys\");\n\t\t$(\"document\").ready(() => {\n\t\t\tfrappe\n\t\t\t\t.call(\"wiki.wiki.doctype.wiki_page.wiki_page.get_sidebar_for_page\", {\n\t\t\t\t\twiki_page: $('[name=\"wiki_page\"]').val(),\n\t\t\t\t})\n\t\t\t\t.then((result) => {\n\t\t\t\t\t$(\".doc-sidebar\").empty().append(result.message);\n\t\t\t\t\tthis.activate_sidebars();\n\t\t\t\t\tthis.set_active_sidebar();\n\t\t\t\t\tthis.set_empty_ul();\n\t\t\t\t\tthis.set_sortable();\n\t\t\t\t\tthis.set_add_item();\n\t\t\t\t\tthis.scrolltotop()\n\t\t\t\t});\n\t\t});\n\t}\n\n\tactivate_sidebars() {\n\t\t$(\".sidebar-item\").each(function (index) {\n\t\t\tconst active_class = \"active\";\n\t\t\tlet page_href = window.location.pathname;\n\t\t\tif (page_href.indexOf(\"#\") !== -1) {\n\t\t\t\tpage_href = page_href.slice(0, page_href.indexOf(\"#\"));\n\t\t\t}\n\t\t\tif (page_href.split('/').slice(0,-1).join('/')== $(this).data(\"route\")) {\n\n\t\t\t\tif ($('[name=\"new\"]').first().val()) {\n\t\t\t\t\t$(`\n\t\t\t\t\t<li class=\"sidebar-item active\" data-type=\"Wiki Page\" data-name=\"new-wiki-page\" data-new=1>\n\t\t\t\t\t\t<div><div>\n\t\t\t\t\t\t\t<a href=\"#\"  class ='active'>New Wiki Page</a>\n\t\t\t\t\t\t</div></div>\n\t\t\t\t\t</li>\n\t\t\t\t`).insertAfter($(this));\n\t\t\t\t} else {\n\t\t\t\t\t$(this).addClass(active_class);\n\t\t\t\t\t$(this).find(\"a\").addClass(active_class);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t// scroll the active sidebar item into view\n\t\tlet active_sidebar_item = $(\".sidebar-item.active\");\n\t\tif (active_sidebar_item.length > 0) {\n\t\t\tactive_sidebar_item.get(0).scrollIntoView(true, {\n\t\t\t\tbehavior: \"smooth\",\n\t\t\t\tblock: \"nearest\",\n\t\t\t});\n\t\t}\n\t}\n\n\tset_empty_ul() {\n\t\t$(\".collapsible\").each(function () {\n\t\t\tif ($(this).parent().find(\"ul\").length == 0) {\n\t\t\t\t$(this)\n\t\t\t\t\t.parent()\n\t\t\t\t\t.append(\n\t\t\t\t\t\t$(`<ul class=\"list-unstyled hidden\" style=\"min-height:20px;\"> </ul`)\n\t\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\tset_sortable() {\n\t\t$(\".web-sidebar ul\").each(function () {\n\t\t\tnew Sortable(this, {\n\t\t\t\tgroup: {\n\t\t\t\t\tname: \"qux\",\n\t\t\t\t\tput: [\"qux\"],\n\t\t\t\t\tpull: [\"qux\"],\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\t\n\tset_add_item() {\n\t\t$(`<div class=\"text-muted add-sidebar-item small\">+ Add Item</div>\n\t\t\t<div class=\"text-muted small mt-3\"><i>Drag items to re-order</i></div>`).appendTo(\n\t\t\t$(\".web-sidebar\")\n\t\t);\n\t\tvar me = this;\n\t\t$(\".add-sidebar-item\").click(function () {\n\t\t\tvar dfs = me.get_add_new_item_dialog_fields();\n\n\t\t\tvar dialog = new frappe.ui.Dialog({\n\t\t\t\ttitle: \"Add to sidebar\",\n\t\t\t\tfields: dfs,\n\t\t\t\tprimary_action: function (fields) {\n\t\t\t\t\tif (fields.type == \"Add Wiki Page\") {\n\t\t\t\t\t\tme.add_wiki_page(fields);\n\t\t\t\t\t} else if(fields.type == \"Group\") {\n\t\t\t\t\t\tme.add_wiki_sidebar(fields);\n\t\t\t\t\t} else if(fields.type == \"Page\"){\n\t\t\t\t\t\tme.add_wiki_sidebar_page(fields);\n\t\t\t\t\t}\n\t\t\t\t\tdialog.hide();\n\t\t\t\t},\n\t\t\t});\n\t\t\tdialog.show();\n\t\t});\n\t}\n\n\tget_add_new_item_dialog_fields() {\n\t\treturn [\n\t\t\t{\n\t\t\t\tfieldname: \"type\",\n\t\t\t\tlabel: \"Do you want to add a page or group?\",\n\t\t\t\tfieldtype: \"Select\",\n\t\t\t\toptions: [\"Page\", \"Group\"],\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"wiki_page\",\n\t\t\t\tlabel: \"Wiki Page\",\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\toptions: \"Wiki Page\",\n\t\t\t\tdepends_on: \"eval: doc.type=='Page'\",\n\t\t\t\tmandatory_depends_on: \"eval: doc.type=='Page'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"route\",\n\t\t\t\tlabel: \"Route\",\n\t\t\t\tfieldtype: \"Data\",\n\t\t\t\tdepends_on: \"eval: doc.type=='Group'\",\n\t\t\t\tmandatory_depends_on: \"eval: doc.type=='Group'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"title\",\n\t\t\t\tlabel: \"Title\",\n\t\t\t\tfieldtype: \"Data\",\n\t\t\t\tdepends_on: \"eval: doc.type=='Group'\",\n\t\t\t\tmandatory_depends_on: \"eval: doc.type=='Group'\",\n\t\t\t},\n\t\t];\n\t}\n\n\tadd_wiki_page(fields) {\n\t\tvar me = this;\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.client.get_value\",\n\t\t\targs: {\n\t\t\t\tdoctype: \"Wiki Page\",\n\t\t\t\tfieldname: \"title\",\n\t\t\t\tfilters: fields.wiki_page,\n\t\t\t},\n\t\t\tcallback: function (r) {\n\t\t\t\tlet $new_page = me.get_new_page_html(r, fields);\n\t\t\t\t\n\t\t\t\t$new_page.appendTo(\n\t\t\t\t\t$(\".doc-sidebar .sidebar-items\")\n\t\t\t\t\t\t.children(\".list-unstyled\")\n\t\t\t\t\t\t.not(\".hidden\")\n\t\t\t\t\t\t.first()\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\tget_new_page_html(r, fields) {\n\t\treturn $(`\n\t\t<li class=\"sidebar-item\" data-type=\"Wiki Page\"\n\t\t\tdata-name=\"${fields.wiki_page}\" data-new=1 >\n\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t\t<a href=\"#\" class=\"green\" >\n\t\t\t\t\t\t\t${r.message.title}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</li>\n\t\t`);\n\t}\n\n\tadd_wiki_sidebar(fields) {\n\t\tlet $new_page = this.get_wiki_sidebar_html(fields);\n\t\t\n\t\t$new_page.appendTo(\n\t\t\t$(\".doc-sidebar .sidebar-items\")\n\t\t\t\t.children(\".list-unstyled\")\n\t\t\t\t.not(\".hidden\")\n\t\t\t\t.first()\n\t\t);\n\n\t\t$(\".web-sidebar ul\").each(function () {\n\t\t\tnew Sortable(this, {\n\t\t\t\tgroup: {\n\t\t\t\t\tname: \"qux\",\n\t\t\t\t\tput: [\"qux\"],\n\t\t\t\t\tpull: [\"qux\"],\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tadd_wiki_sidebar_page(fields) {\n\t\tvar me = this;\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.client.get\",\n\t\t\targs: {\n\t\t\t\tdoctype: \"Wiki Page\",\n\t\t\t\tname: fields.wiki_page,\n\t\t\t},\n\t\t\tcallback: function (r) {\n\t\t\t\tlet $new_page = me.get_wiki_sidebar_html(r.message);\n\t\t\t\t\n\t\t\t\t$new_page.appendTo(\n\t\t\t\t\t$(\".doc-sidebar .sidebar-items\")\n\t\t\t\t\t\t.children(\".list-unstyled\")\n\t\t\t\t\t\t.not(\".hidden\")\n\t\t\t\t\t\t.first()\n\t\t\t\t);\n\n\t\t\t\t$(\".web-sidebar ul\").each(function () {\n\t\t\t\t\tnew Sortable(this, {\n\t\t\t\t\t\tgroup: {\n\t\t\t\t\t\t\tname: \"qux\",\n\t\t\t\t\t\t\tput: [\"qux\"],\n\t\t\t\t\t\t\tpull: [\"qux\"],\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\tget_wiki_sidebar_html(fields) {\n\t\treturn $(`\n\t\t\t<li class=\"sidebar-group\" data-type=\"Wiki Sidebar\"\n\t\t\t\tdata-name=\"new-sidebar\" data-group-name=\"${fields.route}\"\n\t\t\t\tdata-new=1 data-title=\"${fields.title}\" draggable=\"false\">\n\n\t\t\t\t<div class=\"collapsible\">\n\t\t\t\t\t<span class=\"drop-icon hidden\">\n\t\t\t\t\t\t\t<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path d=\"M8 10L12 14L16 10\" stroke=\"#4C5A67\"\n\t\t\t\t\t\t\t\tstroke-miterlimit=\"10\" stroke-linecap=\"round\"\n\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"></path>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<span class=\"drop-left\">\n\t\t\t\t\t\t\t<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\tfill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path d=\"M10 16L14 12L10 8\" stroke=\"#4C5A67\"\n\t\t\t\t\t\t\t\tstroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"h6\">${fields.title}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<ul class=\"list-unstyled hidden\" style=\"min-height:20px;\"> </ul>\n\t\t\t</li>\n\t\t\t`);\n\t}\n};\n", "window.RenderWiki = class RenderWiki extends Wiki {\n\tconstructor(opts) {\n\t\tsuper();\n\t\t$(\"document\").ready(() => {\n\t\t\tif (\n\t\t\t\twindow.location.pathname != \"/revisions\" &&\n\t\t\t\twindow.location.pathname != \"/compare\"\n\t\t\t) {\n\t\t\t\tthis.activate_sidebars();\n\t\t\t\tthis.set_active_sidebar();\n\t\t\t\tthis.set_nav_buttons();\n\t\t\t\tthis.set_toc_highlighter();\n\t\t\t\tthis.scrolltotop()\n\t\t\t}\n\t\t});\n\t}\n\n\tset_toc_highlighter() {\n\t\t$(document).ready(function () {\n\t\t\t$(window).scroll(function () {\n\t\t\t\tif (currentAnchor().not('.no-underline').hasClass(\"active\")) return\n\t\t\t\t$(\".page-toc a\").removeClass(\"active\");\n\t\t\t\tcurrentAnchor().addClass(\"active\");\n\t\t\t});\n\t\t});\n\n\t\tfunction tocItem(anchor) {\n\t\t\treturn $('[href=\"' + anchor + '\"]');\n\t\t}\n\n\t\tfunction heading(anchor) {\n\t\t\treturn $(\"[id=\" + anchor.substr(1) + \"]\");\n\t\t}\n\n\t\tvar _anchors = null;\n\t\tfunction anchors() {\n\t\t\tif (!_anchors) {\n\t\t\t\t_anchors = $(\".page-toc a\").map(function () {\n\t\t\t\t\treturn $(this).attr(\"href\");\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn _anchors;\n\t\t}\n\n\t\tfunction currentAnchor() {\n\t\t\tvar winY = window.pageYOffset;\n\t\t\tvar currAnchor = null;\n\t\t\tanchors().each(function () {\n\t\t\t\tvar y = heading(this).position().top;\n\t\t\t\tif (y < winY + window.innerHeight * 0.23) {\n\t\t\t\t\tcurrAnchor = this;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn tocItem(currAnchor);\n\t\t}\n\t}\n\n\tset_nav_buttons() {\n\t\tvar current_index = -1;\n\n\t\t$(\".sidebar-column\")\n\t\t\t.find(\"a\")\n\t\t\t.each(function (index) {\n\t\t\t\tif ($(this).attr(\"class\")) {\n\t\t\t\t\tlet dish = $(this).attr(\"class\").split(/\\s+/)[0];\n\t\t\t\t\tif (dish === \"active\") {\n\t\t\t\t\t\tcurrent_index = index;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tif (current_index > 0) {\n\t\t\t$(\".btn.left\")[0].href =\n\t\t\t\t$(\".sidebar-column\").find(\"a\")[current_index - 1].href;\n\t\t\t$(\".btn.left\")[0].innerHTML =\n\t\t\t\t\"\u2190\" + $(\".sidebar-column\").find(\"a\")[current_index - 1].innerHTML;\n\t\t} else {\n\t\t\t$(\".btn.left\").hide();\n\t\t}\n\n\t\tif (current_index >= 0 && current_index < $(\".sidebar-column\").find(\"a\").length - 1) {\n\t\t\t$(\".btn.right\")[0].href =\n\t\t\t\t$(\".sidebar-column\").find(\"a\")[current_index + 1].href;\n\t\t\t$(\".btn.right\")[0].innerHTML =\n\t\t\t\t$(\".sidebar-column\").find(\"a\")[current_index + 1].innerHTML + \"\u2192\";\n\t\t} else {\n\t\t\t$(\".btn.right\").hide();\n\t\t}\n\t}\n};\n", "window.EditWikiAr = class EditWikiAr extends Wiki {\n\tconstructor() {\n\t\tsuper();\n\t\tfrappe.provide(\"frappe.ui.keys\");\n\t\t$(\"document\").ready(() => {\n\t\t\tfrappe\n\t\t\t\t.call(\"wiki.wiki.doctype.wiki_page.wiki_page.get_sidebar_for_page\", {\n\t\t\t\t\twiki_page: $('[name=\"wiki_page\"]').val(),\n\t\t\t\t})\n\t\t\t\t.then((result) => {\n\t\t\t\t\t$(\".doc-sidebar\").empty().append(result.message);\n\t\t\t\t\tthis.activate_sidebars();\n\t\t\t\t\tthis.set_active_sidebar();\n\t\t\t\t\tthis.set_empty_ul();\n\t\t\t\t\tthis.set_sortable();\n\t\t\t\t\tthis.set_add_item();\n\t\t\t\t\tthis.scrolltotop()\n\t\t\t\t});\n\t\t});\n\t}\n\n\tactivate_sidebars() {\n\t\t$(\".sidebar-item\").each(function (index) {\n\t\t\tconst active_class = \"active\";\n\t\t\tlet page_href = window.location.pathname;\n\t\t\tif (page_href.indexOf(\"#\") !== -1) {\n\t\t\t\tpage_href = page_href.slice(0, page_href.indexOf(\"#\"));\n\t\t\t}\n\t\t\tif (page_href.split('/').slice(0,-1).join('/')== $(this).data(\"route\")) {\n\n\t\t\t\tif ($('[name=\"new\"]').first().val()) {\n\t\t\t\t\t$(`\n\t\t\t\t\t<li class=\"sidebar-item active\" data-type=\"Wiki Page\" data-name=\"new-wiki-page\" data-new=1>\n\t\t\t\t\t\t<div><div>\n\t\t\t\t\t\t\t<a href=\"#\"  class ='active'>\u0635\u0641\u062D\u0629 \u0648\u064A\u0643\u064A \u062C\u062F\u064A\u062F\u0629</a>\n\t\t\t\t\t\t</div></div>\n\t\t\t\t\t</li>\n\t\t\t\t`).insertAfter($(this));\n\t\t\t\t} else {\n\t\t\t\t\t$(this).addClass(active_class);\n\t\t\t\t\t$(this).find(\"a\").addClass(active_class);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t// scroll the active sidebar item into view\n\t\tlet active_sidebar_item = $(\".sidebar-item.active\");\n\t\tif (active_sidebar_item.length > 0) {\n\t\t\tactive_sidebar_item.get(0).scrollIntoView(true, {\n\t\t\t\tbehavior: \"smooth\",\n\t\t\t\tblock: \"nearest\",\n\t\t\t});\n\t\t}\n\t}\n\n\tset_empty_ul() {\n\t\t$(\".collapsible\").each(function () {\n\t\t\tif ($(this).parent().find(\"ul\").length == 0) {\n\t\t\t\t$(this)\n\t\t\t\t\t.parent()\n\t\t\t\t\t.append(\n\t\t\t\t\t\t$(`<ul class=\"list-unstyled hidden\" style=\"min-height:20px;\"> </ul`)\n\t\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\tset_sortable() {\n\t\t$(\".web-sidebar ul\").each(function () {\n\t\t\tnew Sortable(this, {\n\t\t\t\tgroup: {\n\t\t\t\t\tname: \"qux\",\n\t\t\t\t\tput: [\"qux\"],\n\t\t\t\t\tpull: [\"qux\"],\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tset_add_item() {\n\t\n\t\t$(`<div class=\"text-muted add-sidebar-item small\">+ \u0627\u0636\u0627\u0641\u0629 \u0639\u0646\u0635\u0631 </div>\n\t\t\t<div class=\"text-muted small mt-3\"><i>\u0627\u0633\u062D\u0628 \u0627\u0644\u0639\u0646\u0627\u0635\u0631 \u0644\u0625\u0639\u0627\u062F\u0629 \u062A\u0631\u062A\u064A\u0628\u0647\u0627 </i></div>`).appendTo(\n\t\t\t$(\".web-sidebar\")\n\t\t);\n\t\tvar me = this;\n\t\t$(\".add-sidebar-item\").click(function () {\n\t\t\tvar dfs = me.get_add_new_item_dialog_fields();\n\n\t\t\tvar dialog = new frappe.ui.Dialog({\n\t\t\t\ttitle: \"Add to sidebar\",\n\t\t\t\tfields: dfs,\n\t\t\t\tprimary_action: function (fields) {\n\t\t\t\t\tif (fields.type == \"Add Wiki Page\") {\n\t\t\t\t\t\tme.add_wiki_page(fields);\n\t\t\t\t\t} else if(fields.type == \"Group\") {\n\t\t\t\t\t\tme.add_wiki_sidebar(fields);\n\t\t\t\t\t} else if(fields.type == \"Page\"){\n\t\t\t\t\t\tme.add_wiki_sidebar_page(fields);\n\t\t\t\t\t}\n\t\t\t\t\tdialog.hide();\n\t\t\t\t},\n\t\t\t});\n\t\t\tdialog.show();\n\t\t});\n\t}\n\n\tget_add_new_item_dialog_fields() {\n\t\treturn [\n\t\t\t{\n\t\t\t\tfieldname: \"type\",\n\t\t\t\tlabel: \"Do you want to add a page or group?\",\n\t\t\t\tfieldtype: \"Select\",\n\t\t\t\toptions: [\"Page\", \"Group\"],\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"wiki_page\",\n\t\t\t\tlabel: \"Wiki Page\",\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\toptions: \"Wiki Page\",\n\t\t\t\tdepends_on: \"eval: doc.type=='Page'\",\n\t\t\t\tmandatory_depends_on: \"eval: doc.type=='Page'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"route\",\n\t\t\t\tlabel: \"Route\",\n\t\t\t\tfieldtype: \"Data\",\n\t\t\t\tdepends_on: \"eval: doc.type=='Group'\",\n\t\t\t\tmandatory_depends_on: \"eval: doc.type=='Group'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"title\",\n\t\t\t\tlabel: \"Title\",\n\t\t\t\tfieldtype: \"Data\",\n\t\t\t\tdepends_on: \"eval: doc.type=='Group'\",\n\t\t\t\tmandatory_depends_on: \"eval: doc.type=='Group'\",\n\t\t\t},\n\t\t];\n\t}\n\n\tadd_wiki_page(fields) {\n\t\tvar me = this;\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.client.get_value\",\n\t\t\targs: {\n\t\t\t\tdoctype: \"Wiki Page\",\n\t\t\t\tfieldname: \"title\",\n\t\t\t\tfilters: fields.wiki_page,\n\t\t\t},\n\t\t\tcallback: function (r) {\n\t\t\t\tlet $new_page = me.get_new_page_html(r, fields);\n\t\t\t\t\n\t\t\t\t$new_page.appendTo(\n\t\t\t\t\t$(\".doc-sidebar .sidebar-items\")\n\t\t\t\t\t\t.children(\".list-unstyled\")\n\t\t\t\t\t\t.not(\".hidden\")\n\t\t\t\t\t\t.first()\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\tget_new_page_html(r, fields) {\n\t\treturn $(`\n\t\t<li class=\"sidebar-item\" data-type=\"Wiki Page\"\n\t\t\tdata-name=\"${fields.wiki_page}\" data-new=1 >\n\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t\t<a href=\"#\" class=\"green\" >\n\t\t\t\t\t\t\t${r.message.title}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</li>\n\t\t`);\n\t}\n\n\tadd_wiki_sidebar(fields) {\n\t\tlet $new_page = this.get_wiki_sidebar_html(fields);\n\n\t\t$new_page.appendTo(\n\t\t\t$(\".doc-sidebar .sidebar-items\")\n\t\t\t\t.children(\".list-unstyled\")\n\t\t\t\t.not(\".hidden\")\n\t\t\t\t.first()\n\t\t);\n\n\t\t$(\".web-sidebar ul\").each(function () {\n\t\t\tnew Sortable(this, {\n\t\t\t\tgroup: {\n\t\t\t\t\tname: \"qux\",\n\t\t\t\t\tput: [\"qux\"],\n\t\t\t\t\tpull: [\"qux\"],\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tadd_wiki_sidebar_page(fields) {\n\t\tvar me = this;\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.client.get\",\n\t\t\targs: {\n\t\t\t\tdoctype: \"Wiki Page\",\n\t\t\t\tname: fields.wiki_page,\n\t\t\t},\n\t\t\tcallback: function (r) {\n\t\t\t\tlet $new_page = me.get_wiki_sidebar_html(r.message);\n\n\t\t\t\t$new_page.appendTo(\n\t\t\t\t\t$(\".doc-sidebar .sidebar-items\")\n\t\t\t\t\t\t.children(\".list-unstyled\")\n\t\t\t\t\t\t.not(\".hidden\")\n\t\t\t\t\t\t.first()\n\t\t\t\t);\n\n\t\t\t\t$(\".web-sidebar ul\").each(function () {\n\t\t\t\t\tnew Sortable(this, {\n\t\t\t\t\t\tgroup: {\n\t\t\t\t\t\t\tname: \"qux\",\n\t\t\t\t\t\t\tput: [\"qux\"],\n\t\t\t\t\t\t\tpull: [\"qux\"],\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\tget_wiki_sidebar_html(fields) {\n\t\treturn $(`\n\t\t\t<li class=\"sidebar-group\" data-type=\"Wiki Sidebar\"\n\t\t\t\tdata-name=\"new-sidebar\" data-group-name=\"${fields.route}\"\n\t\t\t\tdata-new=1 data-title=\"${fields.title}\" draggable=\"false\">\n\n\t\t\t\t<div class=\"collapsible\">\n\t\t\t\t\t<span class=\"drop-icon hidden\">\n\t\t\t\t\t\t\t<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path d=\"M8 10L12 14L16 10\" stroke=\"#4C5A67\"\n\t\t\t\t\t\t\t\tstroke-miterlimit=\"10\" stroke-linecap=\"round\"\n\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"></path>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<span class=\"drop-left\">\n\t\t\t\t\t\t\t<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\tfill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path d=\"M10 16L14 12L10 8\" stroke=\"#4C5A67\"\n\t\t\t\t\t\t\t\tstroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"h6\">${fields.title}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<ul class=\"list-unstyled hidden\" style=\"min-height:20px;\"> </ul>\n\t\t\t</li>\n\t\t\t`);\n\t}\n};\n", "window.EditAssetAr = class EditAssetAr {\n\tconstructor() {\n\t\tthis.make_code_field_group();\n\t\tthis.add_attachment_popover();\n\t\t// remove this once the pr related to code editor max lines is merged\n\t\tthis.set_code_editor_height();\n\t\tthis.render_preview();\n\t\tthis.add_attachment_handler();\n\t\tthis.set_listeners();\n\t\tthis.create_comment_box();\n\t\tthis.make_title_editable();\n\t\tthis.render_sidebar_diff()\n\t}\n\n\tmake_code_field_group() {\n\t\tthis.code_field_group = new frappe.ui.FieldGroup({\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"type\",\n\t\t\t\t\tfieldtype: \"Data\",\n\t\t\t\t\tdefault: \"Rich Text\",\n\t\t\t\t\toptions: \"Rich Text\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"language\",\n\t\t\t\t\tfieldtype: \"Select\",\n\t\t\t\t\toptions: ['','English','\u0639\u0631\u0628\u064A'],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"code_html\",\n\t\t\t\t\tfieldtype: \"Text Editor\",\n\t\t\t\t\tdefault: $(\".wiki-content-html\").html(),\n\t\t\t\t\tdepends_on: 'eval:doc.type==\"Rich Text\"',\n\t\t\t\t},\n\t\t\t],\n\t\t\tbody: $(\".wiki-write\").get(0),\n\t\t});\n\t\tthis.code_field_group.make();\n\t\t$(\".wiki-write .form-section:last\").removeClass(\"empty-section\");\n\t}\n\n\tget_attachment_controls_html() {\n\t\treturn `\n\t\t\t<div class=\"attachment-controls\">\n\t\t\t\t<div class=\"show-attachments\" tabindex=\"-1\" data-trigger=\"focus\">\n\t\t\t\t\t${this.get_show_uploads_svg()}\n\t\t\t\t\t<span class=\"number\">0</span> \u0627\u0644\u0645\u0631\u0641\u0642\n\t\t\t\t</div>\n\t\t\t\t<div class=\"add-attachment-wiki\">\n\t\t\t\t\t<span class=\"btn\">\n\t\t\t\t\t\t${this.get_upload_image_svg()}\n\t\t\t\t\t\t\u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u0631\u0641\u0642\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tget_show_uploads_svg() {\n\t\treturn `<svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<path d=\"M12.6004 6.68841L7.6414 11.5616C6.23259 12.946 3.8658 12.946 2.45699 11.5616C1.04819 10.1772\n\t\t\t1.04819 7.85132 2.45699 6.4669L6.85247 2.14749C7.86681 1.15071 9.44467 1.15071 10.459 2.14749C11.4733\n\t\t\t3.14428 11.4733 4.69483 10.459 5.69162L6.40165 9.62339C5.83813 10.1772 4.93649 10.1772 4.42932 9.62339C3.8658\n\t\t\t9.06962 3.8658 8.18359 4.42932 7.68519L7.81045 4.36257\" stroke=\"#2D95F0\" stroke-miterlimit=\"10\" stroke-linecap=\"round\"/>\n\t\t</svg>`\n\t}\n\n\tget_upload_image_svg() {\n\t\treturn `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<path d=\"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899\n\t\t\t 4.41015 14.5 8 14.5Z\" stroke=\"#505A62\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n\t\t\t<path d=\"M8 4.75V11.1351\" stroke=\"#505A62\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n\t\t\t<path d=\"M5.29102 7.45833L7.99935 4.75L10.7077 7.45833\" stroke=\"#505A62\" stroke-miterlimit=\"10\" stroke-linecap=\"round\"\n\t\t\tstroke-linejoin=\"round\"/>\n\t\t</svg>`\n\n\t}\n\n\tadd_attachment_popover() {\n\t\t$(\".show-attachments\").popover({\n\t\t\tplacement: \"bottom\",\n\t\t\tcontent: () => {\n\t\t\t\treturn this.build_attachment_table();\n\t\t\t},\n\t\t\thtml: true,\n\t\t});\n\t}\n\n\tbuild_attachment_table() {\n\t\tvar wrapper = $('<div class=\"wiki-attachment\"></div>');\n\t\twrapper.empty();\n\n\t\tvar table = $(this.get_attachment_table_header_html()).appendTo(wrapper);\n\t\tif (!this.attachments || !this.attachments.length)\n\t\t\treturn \"No attachments uploaded\";\n\n        const caption = file_url => file_url\n            .split(\"/\").pop()                     // filename\n            .split(\".\").slice(0, -1).join(\".\")    // filename without extension\n            .replaceAll(\"_\", \" \")\n            .replaceAll(\"-\", \" \");\n\n\t\tthis.attachments.forEach((f) => {\n\t\t\tconst row = $(\"<tr></tr>\").appendTo(table.find(\"tbody\"));\n\t\t\t$(`<td>${f.file_name}</td>`).appendTo(row);\n\t\t\t$(`<td>\n\t\t\t<a class=\"btn btn-default btn-xs btn-primary-light text-nowrap copy-link\" data-link=\"![${caption(f.file_url)}](${f.file_url})\" data-name = \"${f.file_name}\" >\n\t\t\t\tCopy Link\n\t\t\t</a>\n\t\t\t</td>`).appendTo(row);\n\t\t\t$(`<td>\n\n\t\t\t<a class=\"btn btn-default btn-xs  center delete-button\"  data-name = \"${f.file_name}\" >\n\t\t\t<svg class=\"icon icon-sm\"><use xlink:href=\"#icon-delete\"></use></svg>\n\n\t\t\t</a>\n\t\t\t</td>`).appendTo(row);\n\t\t});\n\t\treturn wrapper;\n\t}\n\n\tget_attachment_table_header_html() {\n\t\treturn `<table class=\"table  attachment-table\" \">\n\t\t\t<tbody></tbody>\n\t\t</table>`;\n\t}\n\n\tset_code_editor_height() {\n\t\tsetTimeout(() => {\n\t\t\t// expand_code_editor\n\t\t\tconst code_md = this.code_field_group.get_field(\"code_md\");\n\t\t\tcode_md.expanded = !this.expanded;\n\t\t\tcode_md.refresh_height();\n\t\t\tcode_md.toggle_label();\n\t\t}, 120);\n\t}\n\n\traise_patch(draft = false) {\n\t\tvar side = {};\n\t\t\n\t\tlet name = $(\".doc-sidebar .web-sidebar\").get(0).dataset.name;\n\t\tside[name] = [];\n\t\tlet items = $($(\".doc-sidebar .web-sidebar\").get(0))\n\t\t\t.children(\".sidebar-items\")\n\t\t\t.children(\"ul\")\n\t\t\t.not(\".hidden\")\n\t\t\t.children(\"li\");\n\t\titems.each((item) => {\n\t\t\tif (!items[item].dataset.name) return;\n\t\t\tside[name].push({\n\t\t\t\tname: items[item].dataset.name,\n\t\t\t\ttype: items[item].dataset.type,\n\t\t\t\tnew: items[item].dataset.new,\n\t\t\t\ttitle: items[item].dataset.title,\n\t\t\t\tgroup_name: items[item].dataset.groupName,\n\t\t\t});\n\t\t});\n\n\t\t$('.doc-sidebar [data-type=\"Wiki Sidebar\"]').each(function () {\n\t\t\tlet name = $(this).get(0).dataset.groupName;\n\t\t\tside[name] = [];\n\t\t\tlet items = $(this).children(\"ul\").children(\"li\");\n\t\t\titems.each((item) => {\n\t\t\t\tif (!items[item].dataset.name) return;\n\t\t\t\tside[name].push({\n\t\t\t\t\tname: items[item].dataset.name,\n\t\t\t\t\ttype: items[item].dataset.type,\n\t\t\t\t\tnew: items[item].dataset.new,\n\t\t\t\t\ttitle: items[item].dataset.title,\n\t\t\t\t\tgroup_name: items[item].dataset.groupName,\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tvar me = this;\n\t\tvar dfs = [];\n\t\tconst title_of_page = $('.edit-title span').text();\n\t\tdfs.push(\n\t\t\t{\n\t\t\t\tfieldname: \"edit_message\",\n\t\t\t\tfieldtype: \"Text\",\n\t\t\t\tlabel: \"Message\",\n\t\t\t\tdefault: $('[name=\"new\"]').val()\n\t\t\t\t\t? `Add new page: ${title_of_page}`\n\t\t\t\t\t: `${title_of_page} \u062A\u0645 \u062A\u062D\u0631\u064A\u0631\u0647`,\n\t\t\t\tmandatory: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"sidebar_edited\",\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t\tlabel: \"\u0644\u0642\u062F \u0642\u0645\u062A \u0628\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0634\u0631\u064A\u0637 \u0627\u0644\u062C\u0627\u0646\u0628\u064A\",\n\t\t\t\tdefault: $('[name=\"new\"]').val() ? 1 : 0,\n\t\t\t}\n\t\t);\n\n\t\tlet dialog = new frappe.ui.Dialog({\n\t\t\tfields: dfs,\n\t\t\ttitle: __(\"\u0631\u062C\u0649 \u0648\u0635\u0641 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A \u0627\u0644\u062E\u0627\u0635\u0629 \u0628\u0643\"),\n\t\t\tprimary_action_label: __(\"\u0623\u0631\u0633\u0644 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A\"),\n\t\t\tprimary_action: function () {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"one_wiki.overrides.overrides.update_create_patch\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tname: $('[name=\"wiki_page\"]').val(),\n\t\t\t\t\t\twiki_page_patch: $('[name=\"wiki_page_patch\"]').val(),\n\t\t\t\t\t\tmessage: this.get_value(\"edit_message\"),\n\t\t\t\t\t\tsidebar_edited: this.get_value(\"sidebar_edited\"),\n\t\t\t\t\t\tcontent: me.content,\n\t\t\t\t\t\ttype: me.code_field_group.get_value(\"type\"),\n\t\t\t\t\t\tlanguage:me.code_field_group.fields_dict.language.value,\n\t\t\t\t\t\tattachments: me.attachments,\n\t\t\t\t\t\tnew: $('[name=\"new\"]').val(),\n\t\t\t\t\t\ttitle: $('.edit-title span').text(),\n\t\t\t\t\t\tnew_sidebar: $(\".doc-sidebar\").get(0).innerHTML,\n\t\t\t\t\t\tnew_sidebar_items: side,\n\t\t\t\t\t\tdraft:draft ? draft : null\n\t\t\t\t\t},\n\t\t\t\t\tcallback: (r) => {\n\t\t\t\t\t\tif (!r.message.approved && r.message.route == 'contributions') {\n\t\t\t\t\t\t\tfrappe.msgprint({\n\t\t\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t\t\t\"\u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u0637\u0644\u0628 \u062A\u063A\u064A\u064A\u0631. \u064A\u0645\u0643\u0646\u0643 \u062A\u062A\u0628\u0639 \u0637\u0644\u0628\u0627\u062A\u0643 \u0639\u0644\u0649 \u0635\u0641\u062D\u0629 \u0627\u0644\u0645\u0633\u0627\u0647\u0645\u0627\u062A\",\n\t\t\t\t\t\t\t\tindicator: \"green\",\n\t\t\t\t\t\t\t\ttitle: \"\u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u0637\u0644\u0628 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\",\n\t\t\t\t\t\t\t\talert: 1\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (!r.message.approved && r.message.route == 'drafts') {\n\t\t\t\t\t\t\tfrappe.msgprint({\n\t\t\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t\t\t\"\u062A\u0645 \u062D\u0641\u0638 \u0627\u0644\u0645\u0633\u0648\u062F\u0629\",\n\t\t\t\t\t\t\t\tindicator: \"green\",\n\t\t\t\t\t\t\t\ttitle: \"\u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u0637\u0644\u0628 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\",\n\t\t\t\t\t\t\t\talert: 1\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// route back to the main page\n\t\t\t\t\t\twindow.location.href = '/' + r.message.route;\n\t\t\t\t\t},\n\t\t\t\t\tfreeze: true,\n\t\t\t\t});\n\t\t\t\tdialog.hide();\n\t\t\t\t$(\"#freeze\").addClass(\"show\");\n\t\t\t},\n\t\t});\n\t\tdialog.show();\n\t}\n\n\trender_preview() {\n\t\t$('a[data-toggle=\"tab\"]').on(\"click\", (e) => {\n\t\t\tlet activeTab = $(e.target);\n\n\t\t\tif (\n\t\t\t\tactiveTab.prop(\"id\") === \"preview-tab\" ||\n\t\t\t\tactiveTab.prop(\"id\") === \"diff-tab\"\n\t\t\t) {\n\t\t\t\tlet $preview = $(\".wiki-preview\");\n\t\t\t\tlet $diff = $(\".wiki-diff\");\n\t\t\t\tconst type = this.code_field_group.get_value(\"type\");\n\t\t\t\tlet content = \"\";\n\t\t\t\tif (type == \"Markdown\") {\n\t\t\t\t\tcontent = this.code_field_group.get_value(\"code_md\");\n\t\t\t\t} else {\n\t\t\t\t\tcontent = this.code_field_group.get_value(\"code_html\");\n\t\t\t\t\tvar turndownService = new TurndownService();\n\t\t\t\t\tturndownService = turndownService.keep([\"div class\", \"iframe\"]);\n\t\t\t\t\tcontent = turndownService.turndown(content);\n\t\t\t\t}\n\t\t\t\tif (!content) {\n\t\t\t\t\tthis.set_empty_message($preview, $diff);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.set_loading_message($preview, $diff);\n\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"wiki.wiki.doctype.wiki_page.wiki_page.preview\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tcontent: content,\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\tpath: this.route,\n\t\t\t\t\t\tname: $('[name=\"wiki_page\"]').val(),\n\t\t\t\t\t\tattachments: this.attachments,\n\t\t\t\t\t\tnew: $('[name=\"new\"]').val(),\n\t\t\t\t\t},\n\t\t\t\t\tcallback: (r) => {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\t$preview.html(r.message.html);\n\t\t\t\t\t\t\tif (!$('[name=\"new\"]').val()) {\n\t\t\t\t\t\t\t\tconst empty_diff = `<div class=\"text-muted center\"> \u0644\u0645 \u064A\u062A\u0645 \u0625\u062C\u0631\u0627\u0621 \u0623\u064A \u062A\u063A\u064A\u064A\u0631\u0627\u062A</div>`\n\t\t\t\t\t\t\t\tconst diff_html = $(r.message.diff).find('.insert, .delete').length?r.message.diff:empty_diff\n\t\t\t\t\t\t\t\t$diff.html(diff_html);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tset_empty_message($preview, $diff) {\n\t\t$preview.html(\"<div>\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u0636\u0627\u0641\u0629 \u0628\u0639\u0636 \u0627\u0644\u0643\u0648</div>\");\n\t\t$diff.html(\"<div>\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u0636\u0627\u0641\u0629 \u0628\u0639\u0636 \u0627\u0644\u0643\u0648</div>\");\n\t}\n\n\tset_loading_message($preview, $diff) {\n\t\t$preview.html(\"...\u0645\u0639\u0627\u064A\u0646\u0629 \u0627\u0644\u062A\u062D\u0645\u064A\u0644\");\n\t\t$diff.html(\"...\u0641\u0631\u0642 \u0627\u0644\u062A\u062D\u0645\u064A\u0644\");\n\t}\n\n\tadd_attachment_handler() {\n\t\tvar me = this;\n\t\t$(\".add-attachment-wiki\").click(function () {\n\t\t\tme.new_attachment();\n\t\t});\n\t\t$(\".submit-wiki-page\").click(function () {\n\t\t\tme.get_markdown();\n\t\t});\n\n\t\t$(\".draft-wiki-page\").click(function () {\n\t\t\t// setting draft as true\n\t\t\tme.get_markdown(true);\n\t\t});\n\t}\n\n\tnew_attachment() {\n\t\tif (this.dialog) {\n\t\t\t// remove upload dialog\n\t\t\tthis.dialog.$wrapper.remove();\n\t\t}\n\n\t\tnew frappe.ui.FileUploader({\n\t\t\tfolder: \"Home/Attachments\",\n\t\t\ton_success: (file_doc) => {\n\t\t\t\tif (!this.attachments) this.attachments = [];\n\t\t\t\tif (!this.save_paths) this.save_paths = {};\n\t\t\t\tthis.attachments.push(file_doc);\n\t\t\t\t$(\".wiki-attachment\").empty().append(this.build_attachment_table());\n\t\t\t\t$(\".attachment-controls\").find(\".number\").text(this.attachments.length);\n\t\t\t},\n\t\t});\n\t}\n\n\tget_markdown(draft = false) {\n\t\tvar me = this;\n\n\t\tif (me.code_field_group.get_value(\"type\") == \"Markdown\") {\n\t\t\tthis.content = me.code_field_group.get_value(\"code_md\");\n\t\t\tthis.raise_patch(draft);\n\t\t} else {\n\t\t\tthis.content = this.code_field_group.get_value(\"code_html\");\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod:\n\t\t\t\t\t\"wiki.wiki.doctype.wiki_page.wiki_page.extract_images_from_html\",\n\t\t\t\targs: {\n\t\t\t\t\tcontent: this.content,\n\t\t\t\t},\n\t\t\t\tcallback: (r) => {\n\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\tme.content = r.message;\n\t\t\t\t\t\tvar turndownService = new TurndownService();\n\t\t\t\t\t\tturndownService = turndownService.keep([\"div class\", \"iframe\"]);\n\t\t\t\t\t\tme.content = turndownService.turndown(me.content);\n\t\t\t\t\t\tme.raise_patch(draft);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tset_listeners() {\n\t\tvar me = this;\n\n\t\t$(`body`).on(\"click\", `.copy-link`, function () {\n\t\t\tfrappe.utils.copy_to_clipboard($(this).attr(\"data-link\"));\n\t\t});\n\n\t\t$(`body`).on(\"click\", `.delete-button`, function () {\n\t\t\tfrappe.confirm(\n\t\t\t\t`\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0623\u0646\u0643 \u062A\u0631\u064A\u062F \u062D\u0630\u0641 \u0627\u0644\u0645\u0644\u0641 \"${$(this).attr(\n\t\t\t\t\t\"data-name\"\n\t\t\t\t)}\"`,\n\t\t\t\t() => {\n\t\t\t\t\tme.attachments.forEach((f, index, object) => {\n\t\t\t\t\t\tif (f.file_name == $(this).attr(\"data-name\")) {\n\t\t\t\t\t\t\tobject.splice(index, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t$(\".wiki-attachment\").empty().append(me.build_attachment_table());\n\t\t\t\t\t$(\".attachment-controls\").find(\".number\").text(me.attachments.length);\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tcreate_comment_box() {\n\t\tthis.comment_box = frappe.ui.form.make_control({\n\t\t\tparent: $(\".comment-box\"),\n\t\t\tdf: {\n\t\t\t\tfieldname: \"new_comment\",\n\t\t\t\tfieldtype: \"Comment\",\n\t\t\t},\n\t\t\tenable_mentions: false,\n\t\t\trender_input: true,\n\t\t\tonly_input: true,\n\t\t\ton_submit: (comment) => {\n\t\t\t\tthis.add_comment_to_patch(comment);\n\t\t\t},\n\t\t});\n\t}\n\n\tadd_comment_to_patch(comment) {\n\t\tif (strip_html(comment).trim() != \"\") {\n\t\t\tthis.comment_box.disable();\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod:\n\t\t\t\t\t\"wiki.wiki.doctype.wiki_page_patch.wiki_page_patch.add_comment_to_patch\",\n\t\t\t\targs: {\n\t\t\t\t\treference_name: $('[name=\"wiki_page_patch\"]').val(),\n\t\t\t\t\tcontent: comment,\n\t\t\t\t\tcomment_email: frappe.session.user,\n\t\t\t\t\tcomment_by: frappe.session.user_fullname,\n\t\t\t\t},\n\t\t\t\tcallback: (r) => {\n\t\t\t\t\tcomment = r.message;\n\n\t\t\t\t\tthis.display_new_comment(comment, this.comment_box);\n\t\t\t\t},\n\t\t\t\talways: () => {\n\t\t\t\t\tthis.comment_box.enable();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tdisplay_new_comment(comment, comment_box) {\n\t\tif (comment) {\n\t\t\tcomment_box.set_value(\"\");\n\n\t\t\tconst new_comment = this.get_comment_html(\n\t\t\t\tcomment.owner,\n\t\t\t\tcomment.creation,\n\t\t\t\tcomment.timepassed,\n\t\t\t\tcomment.content\n\t\t\t);\n\n\t\t\t$(\".timeline-items\").prepend(new_comment);\n\t\t}\n\t}\n\n\tget_comment_html(owner, creation, timepassed, content) {\n\t\treturn $(`\n\t\t\t<div class=\"timeline-item\">\n\t\t\t\t<div class=\"timeline-badge\">\n\t\t\t\t\t<svg class=\"icon icon-md\">\n\t\t\t\t\t\t<use href=\"#icon-small-message\"></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"timeline-content frappe-card\">\n\t\t\t\t\t<div class=\"timeline-message-box\">\n\t\t\t\t\t\t<span class=\"flex justify-between\">\n\t\t\t\t\t\t\t<span class=\"text-color flex\">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t${owner}\n\t\t\t\t\t\t\t\t\t<span class=\"text-muted margin-left\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"frappe-timestamp \"\n\t\t\t\t\t\t\t\t\t\t\tdata-timestamp=\"${creation}\"\n\t\t\t\t\t\t\t\t\t\t\ttitle=\"${creation}\">${timepassed}</span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div class=\"content\">\n\t\t\t\t\t\t\t${content}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`);\n\t}\n\n\tmake_title_editable() {\n\t\tconst title_span = $(\".edit-title>span\");\n\t\tconst title_handle = $(\".edit-title>i\");\n\t\tconst title_input = $(\".edit-title>input\");\n\t\ttitle_handle.click(() => {\n\t\t\ttitle_span.addClass(\"hide\");\n\t\t\ttitle_handle.addClass(\"hide\");\n\t\t\ttitle_input.removeClass(\"hide\");\n\t\t\ttitle_input.val(title_span.text());\n\t\t\ttitle_input.focus();\n\t\t});\n\t\ttitle_input.focusout(() => {\n\t\t\ttitle_span.removeClass(\"hide\");\n\t\t\ttitle_handle.removeClass(\"hide\");\n\t\t\ttitle_input.addClass(\"hide\");\n\t\t\ttitle_span.text(title_input.val());\n\t\t});\n\t\ttitle_input.on('change', (e) => {\n\t\t\t$(\".doc-sidebar .sidebar-items a.active\").text(title_input.val())\n\t\t});\n\t}\n\n\tapprove_wiki_page() {\n\t\tfrappe.call({\n\t\t\tmethod: \"wiki.wiki.doctype.wiki_page.wiki_page.approve\",\n\t\t\targs: {\n\t\t\t\twiki_page_patch: $('[name=\"wiki_page_patch\"]').val(),\n\t\t\t},\n\t\t\tcallback: () => {\n\t\t\t\tfrappe.msgprint({\n\t\t\t\t\tmessage:\n\t\t\t\t\t\t\"The Change has been approved.\",\n\t\t\t\t\tindicator: \"green\",\n\t\t\t\t\ttitle: \"Approved\",\n\t\t\t\t});\n\t\t\t\twindow.location.href = '/' + $('[name=\"wiki_page\"]').val();\n\t\t\t},\n\t\t\tfreeze: true,\n\t\t});\n\n\t}\n\n\trender_sidebar_diff() {\n\t\tconst lis = $(\".sidebar-diff\");\n\t\tlet $new_sidebar_items = $('[name=\"new_sidebar_items\"]').val();\n\t\tconst sidebar_items = $new_sidebar_items && JSON.parse($new_sidebar_items);\n\t\tlis.empty();\n\t\tfor (let sidebar in sidebar_items) {\n\t\t\tfor (let item in sidebar_items[sidebar]) {\n\t\t\t\tlet class_name = (\".\" + sidebar).replaceAll(\"/\", \"\\\\/\");\n\t\t\t\tclass_name = (\".\" + sidebar).replace(/[()]/g, '\\\\$&');\n\t\t\t\tlet target = lis.find(class_name);\n\t\t\t\tif (!target.length) {\n\t\t\t\t\ttarget = $(\".sidebar-diff\");\n\t\t\t\t}\n\t\t\t\tif (sidebar_items[sidebar][item].type == \"Wiki Sidebar\") {\n\t\t\t\t\t$(target).append(\n\t\t\t\t\t\t\"<li>\" +\n\t\t\t\t\t\t\tsidebar_items[sidebar][item].title +\n\t\t\t\t\t\t\t\"</li>\" +\n\t\t\t\t\t\t\t\"<ul class=\" +\n\t\t\t\t\t\t\tsidebar_items[sidebar][item].group_name +\n\t\t\t\t\t\t\t\"></ul>\"\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t$(target).append(\n\t\t\t\t\t\t\"<li class=\" +\n\t\t\t\t\t\t\tsidebar_items[sidebar][item].group_name +\n\t\t\t\t\t\t\t\">\" +\n\t\t\t\t\t\t\tsidebar_items[sidebar][item].title +\n\t\t\t\t\t\t\t\"</li>\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n"],
  "mappings": "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",
  "names": []
}
